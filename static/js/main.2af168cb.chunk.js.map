{"version":3,"sources":["services/PlayStationGameService.ts","actions/gameActions.ts","actions/types.ts","components/LoadingSpinner/index.tsx","actions/regionActions.ts","App.tsx","serviceWorker.ts","store/configureStore.ts","services/converter.ts","reducers/gameReducer.ts","store/keys.ts","reducers/regionReducer.ts","reducers/index.ts","components/Header/LanguageMenu.tsx","components/Header/index.tsx","components/Footer/index.tsx","pages/About/index.tsx","pages/GameDetail/MediaCard.tsx","pages/GameDetail/AttributeCard.tsx","pages/GameDetail/index.tsx","components/PreviewsGrid/GamePreview.tsx","components/PreviewsGrid/index.tsx","pages/Search/index.tsx","pages/Discounts/index.tsx","pages/AllGames/index.tsx","pages/Wishlist/index.tsx","services/GeoLocation/index.ts","pages/SelectRegion/index.tsx","index.tsx","assets/playstation-classic.svg","../../src/constants.ts","../../src/index.ts","../../src/queries.ts","../../src/helpers.ts"],"names":["getGamePreview","game","image","images","url","initialPrice","getInitialPrice","salePrice","getSalePrice","saleDiscount","getSaleDiscount","id","name","timestamp","initial_price","sale_price","sale_discount","default_sku","display_price","saleDetails","PlaystationApi","getSaleDetails","discount","fetchGamePreviewsList","region","total","start","size","DEFAULT_FETCH_SIZE","dispatch","a","console","warn","debug","getGamesList","links","previews","map","link","type","games","error","clearGamesStore","LoadingScreen","styled","div","rotateLogoAnimation","keyframes","LoadingLogo","img","LoadingProgressMessage","LoadingSpinner","props","src","playstationClassicIcon","alt","msg","selectRegion","mapDispatchToProps","fetchRegions","regions","REGIONS","fetchInfo","getStoreInfo","storeInfo","isQueryFailed","info","fetchGames","clearStore","withRouter","connect","state","isLoaded","store","React","useEffect","length","current","history","push","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","composedEnhancers","arrayToMap","array","Map","i","e","set","key","mapToArray","entries","initialState","undefined","search","GAME","regionPersistConfig","storage","persistReducer","action","combineReducers","regionReducer","previewsMap","middlewares","thunkMiddleware","enhancers","applyMiddleware","compose","persistConfig","blacklist","persistedReducer","rootReducer","createStore","persistor","persistStore","renderRegion","styledName","Dropdown","Item","onClick","onSelectRegion","Toggle","style","marginRight","border","color","backgroundColor","fontSize","icon","faLanguage","Menu","className","margin","faPlaystation","Nav","defaultActiveKey","Link","disabled","isLanguageEnabled","FooterContainer","footer","Footer","to","href","target","rel","process","AboutContainer","AboutContent","ExternalLink","About","height","width","GameDetailMediaCardContainer","GameDetailMediaCardImage","GameDetailMediaCardPrices","MediaCard","psPlusPrice","bonus_display_price","getPsPlusPrice","prices","open","getStoreGameLink","loading","getPreviewImage","title","placeholder","faShoppingCart","Title","span","Values","p","AttributeCard","attribute","values","value","GameDetailTitle","h3","GameDetailDescription","SpaceElement","HiddenMobile","HiddenDesktop","cusa","params","useState","setIsLoaded","setGame","sessionItem","sessionStorage","getItem","item","JSON","parse","isCorruptedData","fetch","response","json","setItem","stringify","gameLink","platforms","Set","voices","subtitles","playable_platform","platform","add","substring","indexOf","toUpperCase","entitlements","entitlement","packages","pkg","platformName","voice_language_codes","voice","subtitle_language_codes","subtitle","Container","aria-label","aria-current","Row","Col","xs","sm","md","lg","xl","content_rating","dangerouslySetInnerHTML","__html","long_desc","keys","handleGameClick","pathname","redirectToPsStore","event","preventDefault","price","imageLink","getGameImageLink","Card","Img","variant","Body","StoreGrid","PreviewsGrid","items","slice","threshold","screen","fluid","hasMore","hasMoreItems","initialLoad","isReverse","loadMore","nextPage","loadNextPage","pageStart","useCapture","useWindow","searchGames","searchString","Form","FormControl","onChange","query","handleInputChange","total_results","list","filter","getAddress","pos","coords","latitude","longitude","resp","address","country_code","SelectRegionGrid","SelectRegionCard","SelectRegionHeader","h1","SelectRegionName","callback","country","toLowerCase","geolocation","getCurrentPosition","previousAppVersion","localStorage","appVersion","clear","ReactDOM","render","path","exact","component","document","getElementById","URL","origin","addEventListener","headers","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","module","exports","language","root"],"mappings":"+QAkBaA,EAAiB,SAACC,GAC3B,IAAMC,EAAQD,EAAKE,QAAUF,EAAKE,OAAO,GAAKF,EAAKE,OAAO,GAAGC,IAAM,GAC7DC,EAAeC,EAAgBL,GAC/BM,EAAYC,EAAaP,GACzBQ,EAAeC,EAAgBT,GACrC,MAAO,CACHU,GAAIV,EAAKU,GACTC,KAAMX,EAAKW,KACXV,MAAOA,EACPE,IAAKH,EAAKG,IACVS,UAAWZ,EAAKY,UAChBC,cAAeT,EACfU,WAAYR,EACZS,cAAeP,IAIVH,EAAkB,SAC3BL,GAEA,GAAIA,EAAKgB,YACL,OAAOhB,EAAKgB,YAAYC,eAKnBV,EAAe,SACxBP,GAEA,IAAMkB,EAAcC,UAAuBC,eAAepB,GAC1D,GAAIkB,GAAeA,EAAYD,cAC3B,OAAOC,EAAYD,eAKdR,EAAkB,SAC3BT,GAEA,IAAMkB,EAAcC,UAAuBC,eAAepB,GAC1D,GAAIkB,GAAeA,EAAYG,SAC3B,OAAOH,EAAYG,UCpBdC,EAAwB,SACjCC,EACAC,GAFiC,IAGjCC,EAHiC,uDAGjB,EAChBC,EAJiC,uDAIlBP,YAAyBQ,mBAJP,8CAKhC,WAAOC,GAAP,iBAAAC,EAAA,yDACIN,GAAWA,EAAOZ,KADtB,uBAEGmB,QAAQC,KAAK,wBAFhB,+BAMGN,EAAQD,GANX,uBAOGM,QAAQE,MAAR,wCAA+CT,EAAOZ,OAPzD,iCAWDmB,QAAQE,MAAR,qCAA4CT,EAAOZ,KAAnD,mBAAkEa,EAAlE,kBAAiFC,EAAjF,kBAAgGC,IAX/F,mBAcuBP,UAAuBc,aAAaV,EAAQG,EAAMD,GAdzE,WAcSS,EAdT,0DAkBSC,EAAWD,EAAME,KAAI,SAACC,GACxB,OAAOtC,EAAesC,MAE1BT,EAAS,CAAEU,KC5Cc,oBD4CWC,MAAOJ,IArB9C,kDAuBGL,QAAQU,MAAM,sBAAd,MAvBH,0DALgC,uDAgCxBC,EAAkB,yDAAM,WAAOb,GAAP,SAAAC,EAAA,sDACjCC,QAAQE,MAAM,wBACdJ,EAAS,CAAEU,KCnDkB,sBDiDI,2CAAN,uD,41BEnD/B,IAAMI,EAAgBC,IAAOC,IAAV,KAQbC,EAAsBC,YAAH,KASnBC,EAAcJ,IAAOK,IAAV,IAIKH,GAQhBI,EAAyBN,IAAOC,IAAV,KAgBbM,EARyB,SAACC,GACrC,OACI,kBAACT,EAAD,KACI,kBAACK,EAAD,CAAaK,IAAKC,IAAwBC,IAAI,YAC9C,kBAACL,EAAD,KAAyBE,EAAMI,IAAMJ,EAAMI,IAAM,MC9BhDC,EAAe,SAACjC,GAAD,OAAoD,SAACK,GAC7EE,QAAQE,MAAR,6BAAoCT,EAAOZ,OAC3CiB,EAAS,CAAEU,KFjBc,gBEiBOf,OAAQA,MC2CtCkC,EAAqB,CACvBC,aD1DwB,yDAAM,WAAO9B,GAAP,SAAAC,EAAA,sDAC9BC,QAAQE,MAAM,wBAQdJ,EAAS,CAAEU,KFbc,gBEaOqB,QAASxC,YAAyByC,UATpC,2CAAN,uDC2DxBC,UJ1D0B,SAACtC,GAAD,8CAAoD,WAAOK,GAAP,eAAAC,EAAA,yDACzEN,GAAWA,EAAOZ,KADuD,uBAE1EmB,QAAQC,KAAK,wBAF6D,iCAM9ED,QAAQE,MAAR,mCAA0CT,EAAOZ,KAAjD,MAN8E,kBAQlDQ,UAAuB2C,aAAavC,GARc,UAQpEwC,EARoE,QAStE5C,UAAuB6C,cAAcD,GATiC,wBAUtEnC,EAAS,CAAEU,KCbK,iBDGsD,2BAa1EV,EAAS,CAAEU,KCdc,oBDcW2B,KAAMF,IAbgC,kDAe1EjC,QAAQU,MAAR,0CAAiDjB,EAAOZ,KAAxD,YAf0E,0DAApD,uDI2D1BuD,WAAY5C,EACZ6C,WAAY1B,GAGD2B,cAAWC,aARF,SAACC,GAAD,OAA4BA,IAQDb,EAAzBY,EApDG,SAAClB,GAC1B,IAAMoB,EAAWpB,EAAMqB,MAAMP,MAAQd,EAAMqB,MAAMrC,SA2BjD,OAbAsC,IAAMC,WAAU,WACPvB,EAAM5B,OAAOoC,SAA2C,IAAhCR,EAAM5B,OAAOoC,QAAQgB,QAC9CxB,EAAMO,iBAEX,IAEHe,IAAMC,WAAU,WACPH,GACDpB,EAAMgB,aApBI,WACd,GAAKhB,EAAM5B,OAAOqD,QAIlB,GAAKzB,EAAMqB,MAAMP,UAAjB,CACI,IAAM1C,EAAS4B,EAAM5B,OAAOqD,QAC5BzB,EAAMU,UAAUtC,IAepBsC,KACD,CAACV,EAAM5B,OAAOqD,UAEZzB,EAAM5B,OAAOoC,SAA2C,IAAhCR,EAAM5B,OAAOoC,QAAQgB,QAI7CxB,EAAM5B,OAAOqD,SAAYzB,EAAM5B,OAAOqD,QAAQjE,MAC/CwC,EAAM0B,QAAQC,KAAK,iBAGlBP,GAGLpB,EAAM0B,QAAQC,KAAK,cAEZ,sCAJI,kBAAC,EAAD,CAAgBvB,IAAK,kDARrB,kBAAC,EAAD,UChCTwB,EAAcC,QACa,cAA7BC,OAAOC,SAASC,UAEiB,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MAAM,2DA0CvC,SAASC,EAAgBC,EAAeC,GACpCC,UAAUC,cACLC,SAASJ,GACTK,MAAK,SAACC,GACHA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACE,cAA3BF,EAAiBxB,QACbkB,UAAUC,cAAcQ,YAIxBnE,QAAQoE,IACJ,iHAKAX,GAAUA,EAAOY,UACjBZ,EAAOY,SAASP,KAMpB9D,QAAQoE,IAAI,sCAGRX,GAAUA,EAAOa,WACjBb,EAAOa,UAAUR,WAOxCS,OAAM,SAAC7D,GACJV,QAAQU,MAAM,4CAA6CA,M,IC7EnE8D,E,iFCtBSC,EAAa,SAACC,GACvB,IAAMpE,EAAM,IAAIqE,IAChB,IAAKD,EACD,OAAOpE,EAGX,IAAK,IAAIsE,EAAI,EAAGA,EAAIF,EAAM7B,OAAQ+B,IAAK,CACnC,IAAMC,EAAIH,EAAME,GAChBtE,EAAIwE,IAAID,EAAEE,IAAKF,EAAE3G,MAErB,OAAOoC,GAGE0E,EAAa,SAAC1E,GACvB,IAAMoE,EAAe,GACrB,IAAKpE,EACD,OAAOoE,EAHkD,oBAMnCpE,EAAI2E,WAN+B,IAM7D,2BAAyC,CAAC,IAAD,yBAC/BJ,EAAI,CAAEE,IADyB,KACf7G,KADe,MAErCwG,EAAM1B,KAAK6B,IAR8C,8BAU7D,OAAOH,GCpBLQ,EAAiC,CACnC/C,UAAMgD,EACN9E,SAAU,GACV+E,OAAQ,ICACC,EAAO,gBCAdH,EAA4B,CAC9BrD,QAASxC,YAAyByC,QAClCgB,aAASqC,GAgBPG,EAAsB,CACxBP,IDvBmB,gBCwBnBQ,QAASA,KAGEC,eAAeF,GAlBd,WAAwC,IAAvC9C,EAAsC,uDAA9B0C,EAAcO,EAAgB,uCACnD,OAAQA,EAAOjF,MACX,ITdqB,gBSejB,OAAO,2BAAKgC,GAAZ,IAAmBX,QAAS4D,EAAO5D,UACvC,ITfqB,gBSgBjB,OAAO,2BAAKW,GAAZ,IAAmBM,QAAS2C,EAAOhG,SACvC,IThBoB,eSiBhB,OAAO,2BAAK+C,GAAZ,IAAmBM,QAAS,OAChC,QACI,OAAON,MChBJkD,6BAAgB,CAAEjG,OAAQkG,GAAejD,MHKzC,WAAwC,IAAvCF,EAAsC,uDAA9B0C,EAAcO,EAAgB,uCAClD,OAAQA,EAAOjF,MACX,IPRyB,oBOSrB,OAAO,2BACAgC,GADP,IAEIL,KAAMsD,EAAOtD,OAGrB,IPZyB,oBOcrB,IADA,IAAMyD,EAAcnB,EAAWjC,EAAMnC,UAC5BuE,EAAI,EAAGA,EAAIa,EAAOhF,MAAMoC,OAAQ+B,IAAK,CAC1C,IAAM1G,EAAOuH,EAAOhF,MAAMmE,GAC1BgB,EAAYd,IAAI5G,EAAKU,GAAIV,GAG7B,IAAMmC,EAAW2E,EAAWY,GAC5B,OAAO,2BACApD,GADP,IAEInC,SAAUA,IAGlB,IPxByB,oBOyBrB,OAAO6E,EAEX,IP1BoB,eO2BhB,IADJ,EACU5E,EAAM,IAAIqE,IADpB,cAEuBc,EAAOhF,OAF9B,IAEI,2BAAiC,CAAC,IAAvBvC,EAAsB,QAC7BoC,EAAIwE,IAAI5G,EAAKU,GAAIV,IAHzB,8BAMI,IAAMwG,EAAQM,EAAW1E,GAEzB,OAAO,2BACAkC,GADP,IAEI4C,OAAQV,IAGhB,QACI,OAAOlC,MFtCbqD,GAA4B,CAACC,KAY7BC,GAAY,CADwBC,kBAAe,WAAf,EAAmBH,KAMzDrB,EAAoByB,UAAO,WAAP,EAAWF,IAGnC,IAAMG,GAAgB,CAClBnB,IG7BgB,aH8BhBQ,YACAY,UAAW,CAAC,UAGVC,GAAmBZ,YAAeU,GAAeG,IAEjD3D,GAAQ4D,sBAAYF,GAAkB5B,GACtC+B,GAAYC,YAAa9D,I,qCM4BhBH,gBAHS,SAACC,GAAD,MACnB,CAAEM,QAASN,EAAM/C,OAAOqD,QAASjB,QAASW,EAAM/C,OAAOoC,WAEpB,CAAEH,aAAcA,EAAcf,gBAAiBA,GAAxE4B,EApDuB,SAAClB,GACnC,IAKMoF,EAAe,SAAChH,GAClB,IAAIiH,EAOJ,OAHIA,EAHCrF,EAAMyB,SAAWzB,EAAMyB,QAAQjE,OAASY,EAAOZ,KAGnC,2BAAIY,EAAOZ,MAFXY,EAAOZ,KAMpB,kBAAC8H,GAAA,EAASC,KAAV,CACI7B,IAAK,mBAAqBtF,EAAOZ,KACjCgI,QAAS,YAhBE,SAACpH,GACpB4B,EAAMV,kBACNU,EAAMK,aAAajC,GAePqH,CAAerH,KAGlBiH,IAKP7E,EAAUR,EAAMQ,QAAQvB,KAAI,SAACb,GAAD,OAAYgH,EAAahH,MAE3D,OACI,kBAACkH,GAAA,EAAD,KACI,kBAACA,GAAA,EAASI,OAAV,CACInI,GAAG,gBACHgB,KAAK,KACLoH,MAAO,CACHC,YAAa,UACbC,OAAQ,EACRC,MAAO,sBACPC,gBAAiB,cACjBC,SAAU,WAGd,kBAAC,KAAD,CAAiBC,KAAMC,KAAY3H,KAAK,QAG5C,kBAAC+G,GAAA,EAASa,KAAV,KAAgB3F,O,UCcbS,gBA7DiB,SAACjB,GAC7B,OACI,4BAAQoG,UAAU,0FACd,kBAAC,KAAD,CACIT,MAAO,CAAEU,OAAQ,qBACjBJ,KAAMK,KACN/H,KAAK,KACLiH,QAAS,WACLxF,EAAM0B,QAAQC,KAAK,QAI3B,kBAAC4E,GAAA,EAAD,CAAKH,UAAU,iCAAiCI,iBAAiB,KAC7D,kBAACD,GAAA,EAAIhB,KAAL,KACI,kBAACgB,GAAA,EAAIE,KAAL,CACIL,UAAU,YACVZ,QAAS,WACLxF,EAAM0B,QAAQC,KAAK,aAH3B,WASJ,kBAAC4E,GAAA,EAAIhB,KAAL,KACI,kBAACgB,GAAA,EAAIE,KAAL,CACIL,UAAU,YACVZ,QAAS,WACLxF,EAAM0B,QAAQC,KAAK,gBAH3B,cASJ,kBAAC4E,GAAA,EAAIhB,KAAL,KACI,kBAACgB,GAAA,EAAIE,KAAL,CACIL,UAAU,YACVZ,QAAS,WACLxF,EAAM0B,QAAQC,KAAK,eAH3B,cASJ,kBAAC4E,GAAA,EAAIhB,KAAL,KACI,kBAACgB,GAAA,EAAIE,KAAL,CACIL,UAAU,YACVM,UAAQ,EACRlB,QAAS,WACLxF,EAAM0B,QAAQC,KAAK,eAJ3B,cAYP3B,EAAM2G,kBAAoB,kBAAC,GAAD,MAAmB,yC,sXC/D1D,IAAMC,GAAkBpH,IAAOqH,OAAV,MAsCNC,GApBiB,SAAC9G,GAC7B,OACI,kBAAC4G,GAAD,CAAiBR,UAAWpG,EAAMoG,UAAWT,MAAO3F,EAAM2F,OACtD,kBAAC,IAAD,CAAMS,UAAU,OAAOW,GAAG,UAA1B,SAGC,KACD,uBACIX,UAAU,OACVY,KAAK,sDACLC,OAAO,SACPC,IAAI,uBAJR,UAQC,KAbL,aAaoB,2BAAIC,gB,2hBC/BhC,IAAMC,GAAiB5H,IAAOC,IAAV,MAMd4H,GAAe7H,IAAOC,IAAV,MAYZ6H,GAAe9H,IAAOd,EAAV,MA0EH6I,GAnEgB,SAACvH,GAC5B,OACI,kBAACoH,GAAD,CAAgBhB,UAAWpG,EAAMoG,UAAWT,MAAO3F,EAAM2F,OACrD,kBAAC,GAAD,MACA,kBAAC0B,GAAD,KACI,0CAEA,uBAAGjB,UAAU,eAAee,4EAE5B,uBAAGf,UAAU,UAAb,mEAEA,uBAAGA,UAAU,gBACT,iDAEJ,4BACI,4BACI,kBAACkB,GAAD,CAAcN,KAAK,uBAAuBC,OAAO,SAASC,IAAI,uBAA9D,UAIJ,4BACI,kBAACI,GAAD,CAAcN,KAAK,wBAAwBC,OAAO,SAASC,IAAI,uBAA/D,UAIJ,4BACI,kBAACI,GAAD,CAAcN,KAAK,iCAAiCC,OAAO,SAASC,IAAI,uBAAxE,sBAIJ,4BACI,kBAACI,GAAD,CAAcN,KAAK,2BAA2BC,OAAO,SAASC,IAAI,uBAAlE,gBAIJ,4BACI,kBAACI,GAAD,CAAcN,KAAK,2BAA2BC,OAAO,SAASC,IAAI,uBAAlE,kBAKR,2BACI,4CAEJ,2BACI,yBAAKjH,IAAKC,IAAwBsH,OAAQ,GAAIC,MAAO,GAAItH,IAAI,6BADjE,uCAEgC,IAC5B,kBAACmH,GAAD,CACIN,KAAK,2CACLC,OAAO,SACPC,IAAI,uBAHR,WAMgB,IATpB,OAUS,IACL,kBAACI,GAAD,CAAcN,KAAK,4BAA4BC,OAAO,SAASC,IAAI,uBAAnE,YAXJ,MAkBJ,kBAAC,GAAD,Q,ozBCtFZ,IAAMQ,GAA+BlI,IAAOC,IAAV,MAM5BkI,GAA2BnI,IAAOK,IAAV,MAUxB+H,GAA4BpI,IAAOC,IAAV,MA0EhBoI,GAzDoB,SAAC7H,GAChC,IAIM/C,EAAeC,EAAgB8C,EAAMnD,MACrCM,EAAYC,EAAa4C,EAAMnD,MAC/BiL,EjBCoB,SAC1BjL,GAEA,IAAMkB,EAAcC,UAAuBC,eAAepB,GAC1D,GAAIkB,GAAeA,EAAYgK,oBAC3B,OAAOhK,EAAYgK,oBiBNHC,CAAehI,EAAMnD,MAEnCoL,EAAwB,GAwB9B,OAvBIhL,IAAiBE,EACjB8K,EAAOtG,KACH,yBAAK+B,IAAK,gBAAkB1D,EAAMnD,KAAKU,GAAI6I,UAAU,qBAChDjJ,IAKT8K,EAAOtG,KACH,yBAAK+B,IAAK,cAAgB1D,EAAMnD,KAAKU,GAAI6I,UAAU,0BAC9CjJ,IAKT2K,GACAG,EAAOtG,KACH,yBAAK+B,IAAK,iBAAmB1D,EAAMnD,KAAKU,GAAI6I,UAAU,6BACjD0B,IAMT,kBAACJ,GAAD,CAA8BlC,QAjCR,WACtB1D,OAAOoG,KAAKlK,UAAuBmK,iBAAiBnI,EAAM5B,OAAQ4B,EAAMnD,KAAKU,IAAK,YAiC9E,kBAACoK,GAAD,CACIS,QAAQ,OACRnI,IAAKjC,UAAuBqK,gBAAgBrI,EAAMnD,MAClDyL,MAAOtI,EAAMnD,KAAKW,KAClB+K,YAAavI,EAAMnD,KAAKW,KACxBiK,MAAO,IACPD,OAAQ,MAGZ,kBAACI,GAAD,KACI,kBAAC,KAAD,CACIlE,IAAK,iBAAmB1D,EAAMnD,KAAKU,GACnC0I,KAAMuC,KACNjK,KAAK,KACLoH,MAAO,CAAEC,YAAa,aAEzBqC,K,kRCxFjB,IAAMQ,GAAQjJ,IAAOkJ,KAAV,MAMLC,GAASnJ,IAAOoJ,EAAV,MA2BGC,GAjBwB,SAAC7I,GAAkB,IAAD,EACrD,OAAKA,EAAM8I,WAAc9I,EAAM+I,QAAkC,IAAxB/I,EAAM+I,OAAOvH,OAKlD,oCACI,kBAACiH,GAAD,KAAQzI,EAAM8I,WACd,kBAACH,GAAD,eACK3I,EAAM+I,cADX,aACK,EAAc9J,KAAI,SAAC+J,GAChB,OAAOA,EAAQ,SARpB,sC,kvBCPf,IAAMC,GAAkBzJ,IAAO0J,GAAV,MAUfC,GAAwB3J,IAAOC,IAAV,MAIrB2J,GAAe5J,IAAOC,IAAV,MAIZ4J,GAAe7J,IAAOC,IAAV,MAMZ6J,GAAgB9J,IAAOC,IAAV,MA2IJwB,eAAWC,aAFF,SAACC,GAAD,MAA6B,CAAE/C,OAAQ+C,EAAM/C,OAAOqD,WAElDP,EAjIU,SAAClB,GAAkB,IAAD,MAC5CuJ,EAAevJ,EAAMiC,MAAMuH,OAAOD,KAClCvM,EAAcgD,EAAM+B,SAASZ,MAASnB,EAAM+B,SAASZ,MAAmB,GAF5B,EAGlBG,IAAMmI,UAAS,GAHG,mBAG3CrI,EAH2C,KAGjCsI,EAHiC,OAI1BpI,IAAMmI,cAA0B3F,GAJN,mBAI3CjH,EAJ2C,KAIrC8M,EAJqC,KAMlD,IACI,IAAMC,EAAcC,eAAeC,QAAQ9F,EAAOuF,GAC5CQ,EAAOC,KAAKC,MAAML,GAExBF,GAAY,GACZC,EAAQI,GACV,MAAOvG,GACLkG,GAAY,GACZC,OAAQ7F,GAGZ,IAAMoG,GAAmBX,IAASvM,EAqBlC,GAnBAsE,IAAMC,WAAU,WACR2I,GAGA9I,GAAYvE,GAIhBsN,MAAMnN,GACDwF,MAAK,SAAC4H,GAAD,OAAcA,EAASC,UAC5B7H,MAAK,SAAC6H,GACH,IAAMN,EAAOM,EACbX,GAAY,GACZC,EAAQI,GACRF,eAAeS,QAAQtG,EAAOuF,EAAMS,KAAKO,UAAU1N,OAEtDqG,OAAM,SAACM,GAAD,OAAO7E,QAAQU,MAAR,kCAAyCkK,EAAzC,MAAmD/F,QACtE,IAEC0G,EACA,OAAO,qCAGX,IAAK9I,IAAavE,IAASA,EAAKW,OAASX,EAAKE,OAC1C,OAAO,kBAAC,EAAD,CAAgBqD,IAAK,4DAGhC,IA9CkD,EA8C5CoK,EAAWxM,UAAuBmK,iBAAiBnI,EAAM5B,OAAQvB,EAAKU,IACtEkN,EAAY,IAAIC,IAChBC,EAAS,IAAID,IACbE,EAAY,IAAIF,IAjD4B,cAkD3B7N,EAAKgO,mBAlDsB,IAkDlD,2BAA+C,CAAC,IAArCC,EAAoC,QAC3CL,EAAUM,IAAID,EAASE,UAAU,EAAGF,EAASG,QAAQ,WAAMC,gBAnDb,4DAqDxBrO,EAAKgB,mBArDmB,aAqDxB,EAAkBsN,cArDM,IAqDlD,2BAA0D,CAAC,IAAD,MAA/CC,EAA+C,QACtD,UAAAA,EAAYC,gBAAZ,SAAsBpM,KAAI,SAACqM,GACvBb,EAAUM,IAAIO,EAAIC,aAAaL,kBAEnC,UAAAE,EAAYI,4BAAZ,SAAkCvM,KAAI,SAACwM,GACnCd,EAAOI,IAAIU,EAAMP,kBAErB,UAAAE,EAAYM,+BAAZ,SAAqCzM,KAAI,SAAC0M,GACtCf,EAAUG,IAAIY,EAAST,mBA7DmB,8BAiElD,OACI,oCACI,kBAAC,GAAD,MACA,kBAACU,GAAA,EAAD,KACI,yBAAKC,aAAW,cACZ,wBAAIzF,UAAU,cACV,wBAAIA,UAAU,mBACV,kBAAC,IAAD,CAAMW,GAAG,KAAT,SAEJ,wBAAIX,UAAU,yBAAyB0F,eAAa,QAC/CjP,EAAKW,QAIlB,kBAACuO,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAClC,kBAAC/C,GAAD,KACI,kBAAC,GAAD,CAAWlL,OAAQ4B,EAAM5B,OAAQvB,KAAMA,MAI/C,kBAACmP,GAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAClC,kBAACpD,GAAD,CACIzD,QAAS,WACL1D,OAAOoG,KAAKsC,EAAU,YAGzB3N,EAAKW,MACL,UAAAX,EAAKyP,sBAAL,eAAqBtP,KAClB,yBACIiD,IAAG,UAAEpD,EAAKyP,sBAAP,aAAE,EAAqBtP,IAC1BoL,QAAQ,QACRjI,IAAI,SACJqH,OAAO,OACPC,MAAM,SAGV,sCAIR,kBAAC0B,GAAD,CAAuBoD,wBAAyB,CAAEC,OAAQ3P,EAAK4P,cAGnE,kBAACT,GAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACjC,kBAAChD,GAAD,KACI,kBAAC,GAAD,CAAWjL,OAAQ4B,EAAM5B,OAAQvB,KAAMA,IACvC,kBAACuM,GAAD,MACA,kBAAC,GAAD,CAAeN,UAAU,YAAYC,OAAM,aAAM0B,EAAUiC,UAC3D,kBAACtD,GAAD,MACA,kBAAC,GAAD,CAAeN,UAAU,QAAQC,OAAM,aAAM4B,EAAO+B,UACpD,kBAACtD,GAAD,MACA,kBAAC,GAAD,CAAeN,UAAU,YAAYC,OAAM,aAAM6B,EAAU8B,cAK3E,kBAAC,GAAD,W,iDC7GGzL,gBAnDsB,SAACjB,GAClC,IAAM2M,EAAkB,SAAC9P,GACrBmD,EAAM0B,QAAQC,KAAK,CAAEiL,SAAU,SAAW/P,EAAKU,GAAI4D,MAAOtE,EAAKG,OAG7D6P,EAAoB,SAACC,GACvBA,EAAMC,iBACNjL,OAAOoG,KAAKlK,UAAuBmK,iBAAiBnI,EAAM5B,OAAQ4B,EAAMnD,KAAKU,IAAK,WAGlFyP,EACA,yBAAKxH,QAASqH,GACV,+BAAQ7M,EAAMnD,KAAKa,gBAGvBsC,EAAMnD,KAAKe,gBACXoP,EACI,yBAAKxH,QAASqH,GACV,2BAAOzG,UAAU,cAAjB,IAAgCpG,EAAMnD,KAAKe,cAA3C,MAAoE,IACpE,2BACI,+BAAQoC,EAAMnD,KAAKa,gBAClB,IACL,+BAAQsC,EAAMnD,KAAKc,cAK/B,IAAMsP,EAAYjP,UAAuBkP,iBAAiBlN,EAAM5B,OAAQ4B,EAAMnD,KAAKU,GAAI,IAAK,KAE5F,OACI,kBAAC4P,GAAA,EAAD,CAAM/G,UAAU,gBACZ,kBAAC+G,GAAA,EAAKC,IAAN,CACIC,QAAQ,MACRjH,UAAU,UACVnG,IAAKgN,EACL7E,QAAQ,OACRjI,IAAKH,EAAMnD,KAAKW,KAChB8K,MAAOtI,EAAMnD,KAAKW,KAClB+K,YAAavI,EAAMnD,KAAKW,KACxBgI,QAAS,kBAAMmH,EAAgB3M,EAAMnD,SAEzC,kBAACsQ,GAAA,EAAKG,KAAN,CAAWlH,UAAU,UAAUZ,QAAS,kBAAMmH,EAAgB3M,EAAMnD,QAChE,kBAACsQ,GAAA,EAAK1E,MAAN,CAAYrC,UAAU,iBAClB,+BAAQpG,EAAMnD,KAAKW,QAG3B,kBAAC2P,GAAA,EAAKrG,OAAN,CAAaV,UAAU,iBAAiB4G,O,waCjDpD,IAAMO,GAAY/N,IAAOC,IAAV,MAmDA+N,GA9BuB,SAACxN,GACnC,IAIMyN,EAAQzN,EAAMZ,MAAMsO,QAAQzO,KAAI,SAAC8K,GACnC,OAAO,kBAAC,GAAD,CAAarG,IAAK,gBAAkBqG,EAAKrG,IAAKtF,OAAQ4B,EAAM5B,OAAQvB,KAAMkN,EAAKlN,UAGpF8Q,EAAY7L,OAAO8L,OAAOpG,OAEhC,OACI,kBAACoE,GAAA,EAAD,CAAWiC,OAAK,GACZ,kBAAC,KAAD,CACInK,IAAK,kBACLoK,QAAS9N,EAAM+N,eACfC,aAAa,EACbC,WAAW,EACXC,SAjBS,SAACC,GAClBnO,EAAMoO,aAAaD,IAiBXE,UAAW,EACXV,UAAWA,EACXW,YAAY,EACZC,WAAW,GAEX,kBAAChB,GAAD,KAAYE,MCoBtBnN,GAAqB,CAAEkO,YrBZF,SAACpQ,EAAgDqQ,GAAjD,8CAA0E,WACjGhQ,GADiG,iBAAAC,EAAA,yDAG5FN,GAAWA,EAAOZ,KAH0E,uBAI7FmB,QAAQC,KAAK,wBAJgF,iCAOjGD,QAAQE,MAAR,8BAAqCT,EAAOZ,KAA5C,qBAA6DiR,EAA7D,MAPiG,kBAS1EzQ,UAAuB+F,OACtC3F,EACAqQ,EACAzQ,YAAyBQ,oBAZgE,UASvF6L,EATuF,0DAkBvFrL,EAAWqL,EAAKtL,MAAME,KAAI,SAACC,GAC7B,OAAOtC,EAAesC,MAE1BT,EAAS,CAAEU,KC1ES,eD0EWC,MAAOJ,IArBuD,kDAuB7FL,QAAQU,MAAM,sBAAd,MAvB6F,0DAA1E,wDqBcZ4B,eAAWC,aANF,SAACC,GAAD,MAA6B,CACjD/C,OAAQ+C,EAAM/C,OAAOqD,QACrBJ,MAAOF,EAAME,SAIkCf,GAAzBY,EA1DM,SAAClB,GAC7BsB,IAAMC,WAAU,WACPvB,EAAMqB,OACPrB,EAAM0B,QAAQC,KAAK,OAExB,IAgBH,OAAK3B,EAAMqB,OAAUrB,EAAMqB,MAAM0C,OAK7B,oCACI,kBAAC,GAAD,CAAQ4C,mBAAmB,IAC3B,kBAACiF,GAAA,EAAD,CAAWiC,OAAK,GACZ,kBAACa,GAAA,EAAD,KACI,kBAAC1C,GAAA,EAAD,CAAKC,GAAI,EAAG7F,UAAU,qBAClB,kBAACuI,GAAA,EAAD,CACIjL,IAAI,eACJvE,KAAK,OACLoJ,YAAY,kBACZqG,SAAU,SAACpL,GAAD,OAtBR,SAACA,GACvB,GAAKA,EAAEyD,QAAWjH,EAAM5B,OAAxB,CACA,IAAMyQ,EAAQrL,EAAEyD,OAAO+B,OAClB6F,GAASA,EAAMrN,QAAU,GAAiC,MAA5BqN,EAAMA,EAAMrN,OAAS,IAExDxB,EAAMwO,YAAYxO,EAAM5B,OAAQyQ,IAiBoCC,CAAkBtL,QAK9E,kBAAC,GAAD,CACIpF,OAAQ4B,EAAM5B,OACdgB,MAAOY,EAAMqB,MAAM0C,OACnBgK,aApCK,WACjB,OAAO,GAoCKK,aAjCK,SAACD,QAoCd,kBAAC,GAAD,OAzBG,yCC6BT7N,GAAqB,CAAES,WAAY5C,GAE1B8C,eAAWC,aAPF,SAACC,GAAD,MACnB,CACG/C,OAAQ+C,EAAM/C,OAAOqD,QACrBJ,MAAOF,EAAME,SAI8Bf,GAAzBY,EArDS,SAAClB,GAChCsB,IAAMC,WAAU,WACPvB,EAAM5B,QAAW4B,EAAMqB,OAAUrB,EAAMqB,MAAMP,MAASd,EAAMqB,MAAMP,KAAKiO,eACxE/O,EAAM0B,QAAQC,KAAK,OAExB,IAiBH,IAAK3B,EAAMqB,QAAUrB,EAAMqB,MAAMrC,SAC7B,OAAO,qCAGX,IAAMgQ,EAAOhP,EAAMqB,MAAMrC,SAAS0O,QAAQuB,QAAO,SAAClF,GAC9C,YAAmCjG,IAA5BiG,EAAKlN,KAAKe,iBAGrB,OACI,oCACI,kBAAC,GAAD,CAAQ+I,mBAAmB,IAC3B,kBAACiF,GAAA,EAAD,CAAWiC,OAAK,GACZ,kBAAC,GAAD,CACIzP,OAAQ4B,EAAM5B,OACdgB,MAAO4P,EACPjB,aA9BK,WACjB,SACK/N,EAAMqB,MAAMP,OACZd,EAAMqB,MAAMrC,UACbgB,EAAMqB,MAAMrC,SAASwC,QAAUxB,EAAMqB,MAAMP,KAAKiO,gBA2BxCX,aAvBK,SAACD,GACbnO,EAAMqB,MAAMP,MAASd,EAAMqB,MAAMrC,UAGtCgB,EAAMe,WAAWf,EAAM5B,OAAQ4B,EAAMqB,MAAMP,KAAKiO,cAAe/O,EAAMqB,MAAMrC,SAASwC,YAsBhF,kBAAC,GAAD,WCKNlB,GAAqB,CAAES,WAAY5C,GAE1B8C,eAAWC,aANF,SAACC,GAAD,MAA6B,CACjD/C,OAAQ+C,EAAM/C,OAAOqD,QACrBJ,MAAOF,EAAME,SAIkCf,GAAzBY,EAhDQ,SAAClB,GAC/BsB,IAAMC,WAAU,WACPvB,EAAM5B,QAAW4B,EAAMqB,OAAUrB,EAAMqB,MAAMP,MAASd,EAAMqB,MAAMP,KAAKiO,eACxE/O,EAAM0B,QAAQC,KAAK,OAExB,IAiBH,OAAK3B,EAAMqB,OAAUrB,EAAMqB,MAAMrC,SAK7B,oCACI,kBAAC,GAAD,CAAQ2H,mBAAmB,IAC3B,kBAACiF,GAAA,EAAD,CAAWiC,OAAK,GACZ,kBAAC,GAAD,CACIzP,OAAQ4B,EAAM5B,OACdgB,MAAOY,EAAMqB,MAAMrC,SACnB+O,aA1BK,WACjB,SACK/N,EAAMqB,MAAMP,OACZd,EAAMqB,MAAMrC,UACbgB,EAAMqB,MAAMrC,SAASwC,QAAUxB,EAAMqB,MAAMP,KAAKiO,gBAuBxCX,aAnBK,SAACD,GACbnO,EAAMqB,MAAMP,MAASd,EAAMqB,MAAMrC,UAGtCgB,EAAMe,WAAWf,EAAM5B,OAAQ4B,EAAMqB,MAAMP,KAAKiO,cAAe/O,EAAMqB,MAAMrC,SAASwC,YAkBhF,kBAAC,GAAD,OAdG,yCCnBAP,eAAWC,YAHF,KACG,KAEDA,EAbM,SAAClB,GAC7B,OACI,oCACI,kBAAC,GAAD,CAAQ2G,mBAAmB,IAC3B,kBAACiF,GAAA,EAAD,CAAWiC,OAAK,IAChB,kBAAC,GAAD,WCRCqB,GAAU,uCAAG,WAAOC,GAAP,iBAAAzQ,EAAA,sEACHyL,MAAM,+DAAD,OAC2CgF,EAAIC,OAAOC,SADtD,gBACsEF,EAAIC,OAAOE,YAFnF,cAChBC,EADgB,gBAIHA,EAAKlF,OAJF,WAIhBA,EAJgB,QAKZmF,SAAYnF,EAAKmF,QAAQC,aALb,yCAKkC,IALlC,gCAOfpF,EAAKmF,QAAQC,cAPE,2CAAH,sD,u8BCQvB,IAAMC,GAAmBlQ,IAAOC,IAAV,MAchBkQ,GAAmBnQ,IAAOC,IAAV,MAchBmQ,GAAqBpQ,IAAOqQ,GAAV,MAIlBC,GAAmBtQ,IAAOoJ,EAAV,MAuDhBtI,GAAqB,CACvBD,aAAcA,EACdf,gBAAiBA,GAGN2B,eAAWC,aAPF,SAACC,GAAD,MACnB,CAAEX,QAASW,EAAM/C,OAAOoC,QAASiB,QAASN,EAAM/C,OAAOqD,WAMTnB,GAAzBY,EAnDY,SAAClB,GACnCsB,IAAMC,WAAU,WDxCU,IAACwO,ICyCR,SAACN,GAA0B,IAAD,gBAChBzP,EAAMQ,SADU,IACrC,2BAAoC,CAAC,IAA1BpC,EAAyB,QAC5BA,EAAO4R,QAAQC,gBAAkBR,EAAaQ,eAClDjQ,EAAMK,aAAajC,IAHc,gCDxCxCiE,WAAcA,UAAU6N,aAC7B7N,UAAU6N,YAAYC,oBAAmB,SAAChB,GACtCD,GAAWC,GACN3M,MAAK,SAACiN,GAAD,OAAkBM,EAASN,MAChCvM,OAAM,SAACM,GAAD,OAAO7E,QAAQU,MAAMmE,WC0CjC,IAEHlC,IAAMC,WAAU,WACRvB,EAAMyB,SACNzB,EAAM0B,QAAQC,KAAK,OAExB,CAAC3B,EAAMyB,UAEV,IAeMjB,EAAUR,EAAMQ,QAAQvB,KAAI,SAACb,GAAD,OAfb,SAACA,GAClB,OACI,kBAACuR,GAAD,CACIjM,IAAK,UAAYtF,EAAOZ,KACxB4I,UAAU,oBACVZ,QAAS,WACLxF,EAAMV,kBACNU,EAAMK,aAAajC,KAGvB,kBAAC0R,GAAD,KAAmB1R,EAAOZ,OAKQ4H,CAAahH,MAC3D,OACI,oCACI,kBAAC,GAAD,MACA,kBAACwN,GAAA,EAAD,CAAWiC,OAAK,GACZ,kBAAC+B,GAAD,4CACA,kBAACF,GAAD,KAAmBlP,IAEvB,kBAAC,GAAD,WCzEN4P,GAAqBC,aAAavG,QlBnBb,6BkBoBrBwG,GAAU,UAAMnJ,cAClBiJ,IAAsBA,KAAuBE,IAC7CD,aAAaE,QAEjBF,aAAa/F,QlBxBc,4BkBwBOgG,IAElCE,IAASC,OACL,kBAAC,IAAD,CAAUpP,MAAOA,IACb,kBAAC,IAAD,CAAa+G,QAAS,KAAMlD,UAAWA,IACnC,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOwL,KAAK,IAAIC,OAAK,EAACC,UAAW,kBAAM,kBAAC,EAAD,SACvC,kBAAC,IAAD,CAAOF,KAAK,gBAAgBC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SACnD,kBAAC,IAAD,CAAOF,KAAK,UAAUC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SAC7C,kBAAC,IAAD,CAAOF,KAAK,aAAaC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SAChD,kBAAC,IAAD,CAAOF,KAAK,YAAYC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SAC/C,kBAAC,IAAD,CAAOF,KAAK,YAAYC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SAC/C,kBAAC,IAAD,CAAOF,KAAK,SAASC,OAAK,EAACC,UAAW,kBAAM,kBAAC,GAAD,SAC5C,kBAAC,IAAD,CAAOF,KAAK,cAAcE,UAAW,kBAAM,kBAAC,GAAD,aAK3DC,SAASC,eAAe,StBlBrB,SAAkB1O,GACrB,GAA6C,kBAAmBC,UAAW,CAGvE,GADkB,IAAI0O,IAAI5J,sBAAwBrF,OAAOC,SAASiF,MACpDgK,SAAWlP,OAAOC,SAASiP,OAIrC,OAGJlP,OAAOmP,iBAAiB,QAAQ,WAC5B,IAAM9O,EAAK,UAAMgF,sBAAN,sBAEPvF,IAgEhB,SAAiCO,EAAeC,GAE5C+H,MAAMhI,EAAO,CACT+O,QAAS,CAAE,iBAAkB,YAE5B1O,MAAK,SAAC4H,GAEH,IAAM+G,EAAc/G,EAAS8G,QAAQE,IAAI,gBACjB,MAApBhH,EAASiH,QAAkC,MAAfF,IAA8D,IAAvCA,EAAYlG,QAAQ,cAEvE5I,UAAUC,cAAcgP,MAAM9O,MAAK,SAACC,GAChCA,EAAa8O,aAAa/O,MAAK,WAC3BV,OAAOC,SAASyP,eAKxBtP,EAAgBC,EAAOC,MAG9Bc,OAAM,WACHvE,QAAQoE,IAAI,oEAnFR0O,CAAwBtP,EAAOC,GAI/BC,UAAUC,cAAcgP,MAAM9O,MAAK,WAC/B7D,QAAQoE,IACJ,iHAMRb,EAAgBC,EAAOC,OsBJvCE,I,mBCjEAoP,EAAOC,QAAU,IAA0B,iD,6KCkB9B,cAAc,OAAO,OAAO,CAAE,aAAc,eAAgB,UAAW,cACvE,kBAAkB,OAAO,OAAO,CAAE,IAAK,MAAO,KAAM,SACpD,qBAAqB,GACrB,sBAAsB,EAGtB,UAA+B,CACxC,CAAEnU,KAAM,YAAa,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC1D,CAAEA,KAAM,YAAa,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC1D,CAAEA,KAAM,0BAAwB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACrE,CAAEA,KAAM,wBAAsB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACnE,CAAEA,KAAM,uBAAwB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACrE,CAAEA,KAAM,SAAU,SAAU,KAAM,QAAS,KAAM,KAAM,2BACvD,CAAEA,KAAM,8DAAuB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACpE,CAAEA,KAAM,SAAU,SAAU,KAAM,QAAS,KAAM,KAAM,2BACvD,CAAEA,KAAM,kBAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,2BAChE,CAAEA,KAAM,QAASoU,SAAU,KAAM5B,QAAS,KAAM6B,KAAM,2BACtD,CAAErU,KAAM,WAAY,SAAU,KAAM,QAAS,KAAM,KAAM,2BACzD,CAAEA,KAAM,aAAc,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC3D,CAAEA,KAAM,qBAAsB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACnE,CAAEA,KAAM,SAAU,SAAU,KAAM,QAAS,KAAM,KAAM,4BACvD,CAAEA,KAAM,sCAAoC,SAAU,KAAM,QAAS,KAAM,KAAM,4BACjF,CAAEA,KAAM,oBAAqB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAClE,CAAEA,KAAM,UAAW,SAAU,KAAM,QAAS,KAAM,KAAM,2BACxD,CAAEA,KAAM,cAAeoU,SAAU,KAAM5B,QAAS,KAAM6B,KAAM,2BAC5D,CAAErU,KAAM,kBAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAChE,CAAEA,KAAM,SAAU,SAAU,KAAM,QAAS,KAAM,KAAM,4BACvD,CAAEA,KAAM,wBAAyB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtE,CAAEA,KAAM,gDAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAChE,CAAEA,KAAM,YAAa,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC1D,CAAEA,KAAM,WAAY,SAAU,KAAM,QAAS,KAAM,KAAM,2BACzD,CAAEA,KAAM,4BAA0B,SAAU,KAAM,QAAS,KAAM,KAAM,4BACvE,CAAEA,KAAM,sBAAoB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACjE,CAAEA,KAAM,QAAS,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtD,CAAEA,KAAM,UAAW,SAAU,KAAM,QAAS,KAAM,KAAM,4BACxD,CAAEA,KAAM,QAAS,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtD,CAAEA,KAAM,uBAAwB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACrE,CAAEA,KAAM,2BAAyB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtE,CAAEA,KAAM,QAAS,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtD,CAAEA,KAAM,qBAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,2BAChE,CAAEA,KAAM,YAAa,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC1D,CAAEA,KAAM,cAAe,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC5D,CAAEA,KAAM,YAAa,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC1D,CAAEA,KAAM,iBAAkB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC/D,CAAEA,KAAM,qBAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,2BAChE,CAAEA,KAAM,WAAY,SAAU,KAAM,QAAS,KAAM,KAAM,2BACzD,CAAEA,KAAM,iBAAe,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC5D,CAAEA,KAAM,kBAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAChE,CAAEA,KAAM,WAAY,SAAU,KAAM,QAAS,KAAM,KAAM,4BACzD,CAAE,KAAM,uBAAqB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAClE,CAAE,KAAM,gDAAmB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAChE,CAAE,KAAM,wBAAyB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtE,CAAE,KAAM,uBAAwB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACrE,CAAE,KAAM,oCAAkC,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC/E,CAAE,KAAM,eAAgB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC7D,CAAE,KAAM,oBAAkB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC/D,CAAE,KAAM,mBAAoB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACjE,CAAE,KAAM,wBAAyB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACtE,CAAE,KAAM,4BAA0B,SAAU,KAAM,QAAS,KAAM,KAAM,4BACvE,CAAE,KAAM,yBAA0B,SAAU,KAAM,QAAS,KAAM,KAAM,4BACvE,CAAE,KAAM,sBAAoB,SAAU,KAAM,QAAS,KAAM,KAAM,4BACjE,CAAE,KAAM,uDAAqB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAClE,CAAE,KAAM,qCAAsC,SAAU,KAAM,QAAS,KAAM,KAAM,4BACnF,CAAE,KAAM,gBAAiB,SAAU,KAAM,QAAS,KAAM,KAAM,2BAC9D,CAAE,KAAM,iBAAkB,SAAU,KAAM,QAAS,KAAM,KAAM,4BAC/D,CAAE,KAAM,UAAW,SAAU,KAAM,QAAS,KAAM,KAAM,6B,urBCnE5D,eAKS,UAJT,eAIgB,cAHhB,eAG2B,YAF3B,eAEoCmU,EAAQ,QAAR,EAEpC,IAAM,EAAc,2DACb,GACA,GACA,GACA,GAGP,UAAe,G,gWCdf,YAGM,EAAU,4DAEhB,SAAgB,EAAc,GAC1B,OAAO,EAAU,OAAU,EAAU,UAAmC,iBAAvB,EAAU,S,gCAGxD,4FACU,MAAK,UAAI,EAAJ,SADf,oF,+BAIe,E,oEAAf,WAAqB,EAA2B,GAAhD,gGAA8D,EAA9D,+BAAyF,EAAG,EAA5F,uBACC,EADD,UACU,EADV,sBAC+B,EAAO,QADtC,YACiD,EAAO,SADxD,gBACwE,EADxE,kBACsF,cAAY,UADlG,sBACyH,kBAAgB,WAC/H,IAAT,IACA,GAAG,gBAAa,SAEN,IAAV,IACA,GAAG,iBAAc,IANlB,SAQoB,MAAM,GAR1B,cAQG,EARH,iBASqB,EAAS,OAT9B,YAUC,EADEtH,EATH,+BAWO,MAAK,gCAA0B,EAAK,QAX3C,iCAaI,GAbJ,6C,sDAgBA,WAA2B,EAA2B,GAAtD,+EACW,EAAM,EAAQ,EAAM,GAD/B,oF,sDAIA,WAA4B,GAA5B,+EACW,EAAM,EAAQ,EAAO,KAAM,GADtC,oF,sDAIA,WAA4B,GAA5B,4FAAuD,EAAvD,+BAAsE,qBAAoB,EAA1F,+BAA0G,EAA1G,SACiB,EAAM,EAAQ,EAAO,KAAM,EAAM,GADlD,cACG,EADH,yBAEI,EAAK,OAFT,4C,sDASA,WAAsB,EAA2B,GAAjD,8FAAuE,EAAvE,+BAAsF,sBACnF,EADH,4EAC8E,EAAO,QADrF,YACgG,EAAO,SADvG,gBACuH,OAAO,GAD9H,iBACoJ,GADpJ,SAEoB,MAAM,GAF1B,cAEG,EAFH,gBAGqB,EAAS,OAH9B,WAIC,EADE,EAHH,+BAKO,MAAK,gCAA0B,EAAK,QAL3C,iCAOI,GAPJ,6C,sDAUA,WAAwB,EAA2B,GAAnD,gFACG,EADH,+DACiE,EAAO,QADxE,YACmF,EAAO,SAD1F,gBAC0G,EAD1G,mBAEoB,MAAM,GAF1B,cAEG,EAFH,gBAGqB,EAAS,OAH9B,WAIC,EADE,EAHH,8BAKO,MAAK,gCAA0B,EAAK,QAL3C,gCAOI,GAPJ,6C,sBAnDP,kBAIA,a,2CAIA,UAgBAsH,EAAQ,Y,8CAIR,e,4CAIA,e,4CAKA,4BAAiC,EAA2B,GAAuD,IAAzC,EAAyC,uDAAzB,IAAK,EAAoB,uDAAH,IAC5G,gBAAU,EAAV,sBAA+B,EAAO,QAAtC,YAAiD,EAAO,SAAxD,gBAAwE,EAAxE,oBAAwF,EAAxF,cAAmG,IAGvG,S,8CAUA,W,sMCtDA,4BAAiC,EAA2B,GACtD,MAAF,wCAAwC,EAAO,SAA/C,YAA2D,EAAO,QAAlE,oBAAqF,IAGzF,2BAAgC,GAC5B,OAAO,EAAK,OAAO,GAAG,KAG1B,kBAAuB,G,QACnB,OAAuB,QAAhB,IAAK,mBAAW,eAAE,WAA2B,QAAhB,IAAK,mBAAW,eAAE,QAAQ,QAAS,GAG3E,0BAA+B,G,UAC3B,IAAoB,QAAhB,IAAK,mBAAW,eAAE,WAA2B,QAAhB,IAAK,mBAAW,eAAE,QAAQ,QAAS,EAChE,OAAuB,QAAvB,EAAO,EAAK,mBAAW,eAAE,QAAQ,M","file":"static/js/main.2af168cb.chunk.js","sourcesContent":["/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as PlaystationApi from \"playstation-api\";\n\nexport const getGamePreview = (game: PlaystationApi.types.PlaystationGameResponse): PlaystationItemPreview => {\n    const image = game.images && game.images[0] ? game.images[0].url : \"\";\n    const initialPrice = getInitialPrice(game);\n    const salePrice = getSalePrice(game);\n    const saleDiscount = getSaleDiscount(game);\n    return {\n        id: game.id,\n        name: game.name,\n        image: image,\n        url: game.url,\n        timestamp: game.timestamp,\n        initial_price: initialPrice,\n        sale_price: salePrice,\n        sale_discount: saleDiscount,\n    } as PlaystationItemPreview;\n};\n\nexport const getInitialPrice = (\n    game: PlaystationApi.types.PlaystationGameResponse | PlaystationApi.types.PlaystationResponse,\n): string | undefined => {\n    if (game.default_sku) {\n        return game.default_sku.display_price;\n    }\n    return undefined;\n};\n\nexport const getSalePrice = (\n    game: PlaystationApi.types.PlaystationGameResponse | PlaystationApi.types.PlaystationResponse,\n): string | undefined => {\n    const saleDetails = PlaystationApi.helpers.getSaleDetails(game);\n    if (saleDetails && saleDetails.display_price) {\n        return saleDetails.display_price;\n    }\n    return undefined;\n};\n\nexport const getSaleDiscount = (\n    game: PlaystationApi.types.PlaystationGameResponse | PlaystationApi.types.PlaystationResponse,\n): number | undefined => {\n    const saleDetails = PlaystationApi.helpers.getSaleDetails(game);\n    if (saleDetails && saleDetails.discount) {\n        return saleDetails.discount;\n    }\n    return undefined;\n};\n\nexport const getPsPlusPrice = (\n    game: PlaystationApi.types.PlaystationGameResponse | PlaystationApi.types.PlaystationResponse,\n): string | undefined => {\n    const saleDetails = PlaystationApi.helpers.getSaleDetails(game);\n    if (saleDetails && saleDetails.bonus_display_price) {\n        return saleDetails.bonus_display_price;\n    }\n    return undefined;\n};\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CLEAR_GAMES_STORE, CLEAR_REGION, FETCH_GAMES_COUNT, FETCH_PREVIEW_MAP, SEARCH_GAMES } from \"./types\";\nimport { getGamePreview } from \"../services/PlayStationGameService\";\nimport * as PlaystationApi from \"playstation-api\";\n\nexport const fetchStoreInfo = (region: PlaystationApi.types.PlaystationRegion) => async (dispatch: Function) => {\n    if (!region || !region.name) {\n        console.warn(\"No region specified.\");\n        return;\n    }\n\n    console.debug(`Fetching store info for [${region.name}]`);\n    try {\n        const storeInfo = await PlaystationApi.queries.getStoreInfo(region);\n        if (PlaystationApi.queries.isQueryFailed(storeInfo)) {\n            dispatch({ type: CLEAR_REGION });\n            return;\n        }\n        dispatch({ type: FETCH_GAMES_COUNT, info: storeInfo });\n    } catch (e) {\n        console.error(`Cannot fetch store information [${region.name}].`, e);\n    }\n};\n\nexport const fetchGamePreviewsList = (\n    region: PlaystationApi.types.PlaystationRegion,\n    total: number,\n    start: number = 0,\n    size: number = PlaystationApi.constants.DEFAULT_FETCH_SIZE,\n) => async (dispatch: Function) => {\n    if (!region || !region.name) {\n        console.warn(\"No region specified.\");\n        return;\n    }\n\n    if (start > total) {\n        console.debug(`Fetched all game previews for ${region.name}`);\n        return;\n    }\n\n    console.debug(`Fetching game previews for ${region.name}. total=${total} start=${start}, size=${size}`);\n\n    try {\n        const links = await PlaystationApi.queries.getGamesList(region, size, start);\n        if (!links) {\n            return;\n        }\n        const previews = links.map((link) => {\n            return getGamePreview(link);\n        });\n        dispatch({ type: FETCH_PREVIEW_MAP, games: previews });\n    } catch (e) {\n        console.error(\"Cannot fetch games.\", e);\n    }\n};\n\nexport const clearGamesStore = () => async (dispatch: Function) => {\n    console.debug(\"Clearing games store\");\n    dispatch({ type: CLEAR_GAMES_STORE });\n};\n\nexport const searchGames = (region: PlaystationApi.types.PlaystationRegion, searchString: string) => async (\n    dispatch: Function,\n) => {\n    if (!region || !region.name) {\n        console.warn(\"No region specified.\");\n        return;\n    }\n    console.debug(`Searching games for ${region.name}. string=[${searchString}]`);\n    try {\n        const json = await PlaystationApi.queries.search(\n            region,\n            searchString,\n            PlaystationApi.constants.DEFAULT_FETCH_SIZE,\n        );\n        if (!json) {\n            return;\n        }\n\n        const previews = json.links.map((link) => {\n            return getGamePreview(link);\n        });\n        dispatch({ type: SEARCH_GAMES, games: previews });\n    } catch (e) {\n        console.error(\"Cannot fetch games.\", e);\n    }\n};\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const FETCH_REGIONS = \"FETCH_REGIONS\";\nexport const SELECT_REGION = \"SELECT_REGION\";\nexport const CLEAR_REGION = \"CLEAR_REGION\";\n\nexport const FETCH_GAMES_COUNT = \"FETCH_GAMES_COUNT\";\nexport const FETCH_GAMES_LIST = \"FETCH_GAMES_LIST\";\nexport const FETCH_PREVIEW_MAP = \"FETCH_PREVIEW_MAP\";\nexport const CLEAR_GAMES_STORE = \"CLEAR_GAMES_STORE\";\nexport const SEARCH_GAMES = \"SEARCH_GAMES\";\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport playstationClassicIcon from \"../../assets/playstation-classic.svg\";\n\nconst LoadingScreen = styled.div`\n    position: absolute;\n    top: 30%;\n    min-width: 100%;\n    display: flex;\n    flex-direction: column;\n`;\n\nconst rotateLogoAnimation = keyframes`\n    from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n        `;\n\nconst LoadingLogo = styled.img`\n    align-self: center;\n    height: 20vh;\n    pointer-events: none;\n    animation-name: ${rotateLogoAnimation};\n    animation-duration: 0.9s;\n    animation-timing-function: ease-in-out;\n    animation-delay: 0s;\n    animation-iteration-count: infinite;\n    animation-direction: normal;\n`;\n\nconst LoadingProgressMessage = styled.div`\n    align-self: center;\n`;\n\ninterface Props extends React.HTMLProps<any> {\n    msg?: JSX.Element;\n}\n\nconst LoadingSpinner: React.FC<Props> = (props: Props) => {\n    return (\n        <LoadingScreen>\n            <LoadingLogo src={playstationClassicIcon} alt=\"Loading\" />\n            <LoadingProgressMessage>{props.msg ? props.msg : \"\"}</LoadingProgressMessage>\n        </LoadingScreen>\n    );\n};\nexport default LoadingSpinner;\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CLEAR_REGION, FETCH_REGIONS, SELECT_REGION } from \"./types\";\nimport * as PlaystationApi from \"playstation-api\";\n\nexport const fetchRegions = () => async (dispatch: Function) => {\n    console.debug(\"Fetching region list\");\n    /*let regions = await getRegions();\n    if (!regions || regions.length < REGIONS.length) {\n        console.warn(\n            \" Regions not found. Using predefined values\" + regions.length + \" \" + REGIONS.length,\n        );\n        regions = REGIONS;\n    }*/\n    dispatch({ type: FETCH_REGIONS, regions: PlaystationApi.constants.REGIONS });\n};\n\nexport const selectRegion = (region: PlaystationApi.types.PlaystationRegion) => (dispatch: Function) => {\n    console.debug(`Changing region to ${region.name}`);\n    dispatch({ type: SELECT_REGION, region: region });\n};\n\nexport const clearRegion = () => (dispatch: Function) => {\n    console.debug(\"Clearing region\");\n    dispatch({ type: CLEAR_REGION });\n};\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport { clearGamesStore, fetchGamePreviewsList, fetchStoreInfo } from \"./actions/gameActions\";\nimport LoadingSpinner from \"./components/LoadingSpinner\";\nimport { fetchRegions } from \"./actions/regionActions\";\n\ninterface Props extends ReduxStoreState, RouteComponentProps, React.HTMLProps<any> {\n    fetchRegions: Function;\n    fetchInfo: Function;\n    fetchGames: Function;\n    clearStore: Function;\n}\n\nconst App: React.FC<Props> = (props: Props) => {\n    const isLoaded = props.store.info && props.store.previews;\n\n    const fetchInfo = () => {\n        if (!props.region.current) {\n            return;\n        }\n\n        if (!props.store.info) {\n            const region = props.region.current;\n            props.fetchInfo(region);\n            return;\n        }\n    };\n\n    React.useEffect(() => {\n        if (!props.region.regions || props.region.regions.length === 0) {\n            props.fetchRegions();\n        }\n    }, []);\n\n    React.useEffect(() => {\n        if (!isLoaded) {\n            props.clearStore();\n        }\n        fetchInfo();\n    }, [props.region.current]);\n\n    if (!props.region.regions || props.region.regions.length === 0) {\n        return <LoadingSpinner />;\n    }\n\n    if (!props.region.current || !props.region.current.name) {\n        props.history.push(\"/selectregion\");\n    }\n\n    if (!isLoaded) {\n        return <LoadingSpinner msg={<p>Loading games...</p>} />;\n    }\n    props.history.push(\"/discounts\");\n\n    return <></>;\n};\n\nconst mapStateToProps = (state: ReduxStoreState) => state;\nconst mapDispatchToProps = {\n    fetchRegions: fetchRegions,\n    fetchInfo: fetchStoreInfo,\n    fetchGames: fetchGamePreviewsList,\n    clearStore: clearGamesStore,\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === \"[::1]\" ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        \"This web app is being served cache-first by a service \" +\n                            \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === \"installed\") {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                \"New content is available and will be used when all \" +\n                                    \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log(\"Content is cached for offline use.\");\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { \"Service-Worker\": \"script\" },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get(\"content-type\");\n            if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\"No internet connection found. App is running in offline mode.\");\n        });\n}\n\nexport function unregister() {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { applyMiddleware, compose, createStore, Middleware, StoreEnhancer } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { createLogger } from \"redux-logger\";\nimport { persistReducer, persistStore } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport rootReducer from \"../reducers\";\nimport { ROOT } from \"./keys\";\n\nconst middlewares: Middleware[] = [thunkMiddleware];\nif (process.env.NODE_ENV === \"development\") {\n    const loggerMiddleware = createLogger({\n        level: \"log\",\n        duration: true,\n        timestamp: true,\n        logErrors: true,\n        collapsed: true,\n    });\n    middlewares.push(loggerMiddleware);\n}\nconst middlewareEnhancer: StoreEnhancer = applyMiddleware(...middlewares);\nconst enhancers = [middlewareEnhancer];\nlet composedEnhancers: StoreEnhancer;\nif (process.env.NODE_ENV === \"development\") {\n    composedEnhancers = composeWithDevTools(...enhancers);\n} else {\n    composedEnhancers = compose(...enhancers);\n}\n\nconst persistConfig = {\n    key: ROOT,\n    storage,\n    blacklist: [\"store\"],\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nconst store = createStore(persistedReducer, composedEnhancers);\nconst persistor = persistStore(store);\n\nexport { store, persistor };\n","/**\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const arrayToMap = (array: PreviewGamesMapItem[] | undefined) => {\n    const map = new Map<string, any>();\n    if (!array) {\n        return map;\n    }\n\n    for (let i = 0; i < array.length; i++) {\n        const e = array[i];\n        map.set(e.key, e.game);\n    }\n    return map;\n};\n\nexport const mapToArray = (map: Map<string, any> | undefined) => {\n    const array: any[] = [];\n    if (!map) {\n        return array;\n    }\n\n    for (const [key, game] of map.entries()) {\n        const e = { key: key, game: game };\n        array.push(e);\n    }\n    return array;\n};\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CLEAR_GAMES_STORE, FETCH_GAMES_COUNT, FETCH_PREVIEW_MAP, SEARCH_GAMES } from \"../actions/types\";\nimport { arrayToMap, mapToArray } from \"../services/converter\";\n\nconst initialState: PlaystationStore = {\n    info: undefined,\n    previews: [],\n    search: [],\n};\n\nexport default (state = initialState, action: any) => {\n    switch (action.type) {\n        case FETCH_GAMES_COUNT:\n            return {\n                ...state,\n                info: action.info,\n            };\n\n        case FETCH_PREVIEW_MAP:\n            const previewsMap = arrayToMap(state.previews);\n            for (let i = 0; i < action.games.length; i++) {\n                const game = action.games[i];\n                previewsMap.set(game.id, game);\n            }\n\n            const previews = mapToArray(previewsMap);\n            return {\n                ...state,\n                previews: previews,\n            };\n\n        case CLEAR_GAMES_STORE:\n            return initialState;\n\n        case SEARCH_GAMES:\n            const map = new Map();\n            for (const game of action.games) {\n                map.set(game.id, game);\n            }\n\n            const array = mapToArray(map);\n\n            return {\n                ...state,\n                search: array,\n            };\n\n        default:\n            return state;\n    }\n};\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const APP_VERSION = \"persist:redux:app-version\";\nexport const ROOT = \"redux:root\";\nexport const REGIONS = \"redux:regions\";\nexport const STORE = \"redux:store\";\nexport const GAMES = \"redux:games\";\nexport const PREVIEWS = \"redux:previews\";\nexport const GAME = \"persist:game:\";\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CLEAR_REGION, FETCH_REGIONS, SELECT_REGION } from \"../actions/types\";\nimport { REGIONS } from \"../store/keys\";\nimport * as PlaystationApi from \"playstation-api\";\nimport { persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nconst initialState: RegionState = {\n    regions: PlaystationApi.constants.REGIONS,\n    current: undefined,\n};\n\nconst reducer = (state = initialState, action: any) => {\n    switch (action.type) {\n        case FETCH_REGIONS:\n            return { ...state, regions: action.regions };\n        case SELECT_REGION:\n            return { ...state, current: action.region as PlaystationApi.types.PlaystationRegion };\n        case CLEAR_REGION:\n            return { ...state, current: null };\n        default:\n            return state;\n    }\n};\n\nconst regionPersistConfig = {\n    key: REGIONS,\n    storage: storage,\n};\n\nexport default persistReducer(regionPersistConfig, reducer);\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { combineReducers } from \"redux\";\nimport gameReducer from \"./gameReducer\";\nimport regionReducer from \"./regionReducer\";\n\nexport default combineReducers({ region: regionReducer, store: gameReducer });\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faLanguage } from \"@fortawesome/free-solid-svg-icons\";\nimport { selectRegion } from \"../../actions/regionActions\";\nimport { clearGamesStore } from \"../../actions/gameActions\";\nimport { Dropdown } from \"react-bootstrap\";\nimport * as PlaystationApi from \"playstation-api\";\n\ninterface Props extends RegionState, React.HTMLProps<any> {\n    selectRegion: Function;\n    clearGamesStore: Function;\n}\n\nconst LanguageMenu: React.FC<Props> = (props: Props) => {\n    const onSelectRegion = (region: PlaystationApi.types.PlaystationRegion) => {\n        props.clearGamesStore();\n        props.selectRegion(region);\n    };\n\n    const renderRegion = (region: PlaystationApi.types.PlaystationRegion) => {\n        let styledName;\n        if (!props.current || props.current.name !== region.name) {\n            styledName = region.name;\n        } else {\n            styledName = <b>{region.name}</b>;\n        }\n\n        return (\n            <Dropdown.Item\n                key={\"dropdown-region-\" + region.name}\n                onClick={() => {\n                    onSelectRegion(region);\n                }}\n            >\n                {styledName}\n            </Dropdown.Item>\n        );\n    };\n\n    const regions = props.regions.map((region) => renderRegion(region));\n\n    return (\n        <Dropdown>\n            <Dropdown.Toggle\n                id=\"language-menu\"\n                size=\"sm\"\n                style={{\n                    marginRight: \"0.25rem\",\n                    border: 0,\n                    color: \"var(--text-primary)\",\n                    backgroundColor: \"transparent\",\n                    fontSize: \"0.8rem\",\n                }}\n            >\n                <FontAwesomeIcon icon={faLanguage} size=\"2x\" />\n            </Dropdown.Toggle>\n\n            <Dropdown.Menu>{regions}</Dropdown.Menu>\n        </Dropdown>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) =>\n    ({ current: state.region.current, regions: state.region.regions } as RegionState);\n\nexport default connect(mapStateToProps, { selectRegion: selectRegion, clearGamesStore: clearGamesStore })(LanguageMenu);\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlaystation } from \"@fortawesome/free-brands-svg-icons\";\nimport LanguageMenu from \"./LanguageMenu\";\nimport { Nav } from \"react-bootstrap\";\n\ninterface Props extends RouteComponentProps, React.HTMLProps<any> {\n    isLanguageEnabled?: boolean;\n}\n\nconst Header: React.FC<Props> = (props: Props) => {\n    return (\n        <header className=\"d-flex flex-column flex-md-row align-items-center bg-white border-bottom shadow-sm p-1\">\n            <FontAwesomeIcon\n                style={{ margin: \"0 0.5rem 0 0.5rem\" }}\n                icon={faPlaystation}\n                size=\"2x\"\n                onClick={() => {\n                    props.history.push(\"/\");\n                }}\n            />\n\n            <Nav className=\"justify-content-center mr-auto\" defaultActiveKey=\"/\">\n                <Nav.Item>\n                    <Nav.Link\n                        className=\"text-dark\"\n                        onClick={() => {\n                            props.history.push(\"/search\");\n                        }}\n                    >\n                        Search\n                    </Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link\n                        className=\"text-dark\"\n                        onClick={() => {\n                            props.history.push(\"/discounts\");\n                        }}\n                    >\n                        Discounts\n                    </Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link\n                        className=\"text-dark\"\n                        onClick={() => {\n                            props.history.push(\"/allgames\");\n                        }}\n                    >\n                        All Games\n                    </Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link\n                        className=\"text-dark\"\n                        disabled\n                        onClick={() => {\n                            props.history.push(\"/wishlist\");\n                        }}\n                    >\n                        Wishlist\n                    </Nav.Link>\n                </Nav.Item>\n            </Nav>\n\n            {props.isLanguageEnabled ? <LanguageMenu /> : <></>}\n        </header>\n    );\n};\n\nexport default withRouter(Header);\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst FooterContainer = styled.footer`\n    margin-top: auto;\n    width: 100%;\n    display: flex;\n    flex-shrink: 0;\n    flex-direction: row;\n    justify-content: center;\n    padding-top: 0.25rem;\n    padding-bottom: 0.25rem;\n    font-size: 0.8rem;\n\n    @media only screen and (max-width: 600px) {\n        display: none;\n    }\n`;\n\ninterface Props extends React.HTMLProps<any> {}\n\nconst Footer: React.FC<Props> = (props: Props) => {\n    return (\n        <FooterContainer className={props.className} style={props.style}>\n            <Link className=\"link\" to=\"/about\">\n                About\n            </Link>\n            {\". \"}\n            <a\n                className=\"link\"\n                href=\"https://github.com/olegshulyakov/game-price-tracker\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n            >\n                GitHub\n            </a>\n            {\". \"} Version: <b>{process.env.REACT_APP_VERSION}</b>\n        </FooterContainer>\n    );\n};\n\nexport default Footer;\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport playstationClassicIcon from \"../../assets/playstation-classic.svg\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\n\nconst AboutContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    margin: 0;\n`;\n\nconst AboutContent = styled.div`\n    padding-left: 1rem;\n    padding-right: 1rem;\n    padding-top: 0.5rem;\n    padding-bottom: 2.5rem;\n\n    @media (min-width: 600px) {\n        padding-top: 2.5rem;\n        padding-bottom: 1rem;\n    }\n`;\n\nconst ExternalLink = styled.a`\n    color: #07c;\n    text-decoration: none;\n`;\n\ninterface Props extends React.HTMLProps<any> {}\n\nconst About: React.FC<Props> = (props: Props) => {\n    return (\n        <AboutContainer className={props.className} style={props.style}>\n            <Header />\n            <AboutContent>\n                <h3>About page</h3>\n\n                <p className=\"description\">{process.env.REACT_APP_WEBSITE_DESCRIPTION}</p>\n\n                <p className=\"thanks\">We want to thanks people who helped on work with this resource.</p>\n\n                <p className=\"technologies\">\n                    <b>Technology stack:</b>\n                </p>\n                <ul>\n                    <li>\n                        <ExternalLink href=\"https://reactjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            React\n                        </ExternalLink>\n                    </li>\n                    <li>\n                        <ExternalLink href=\"https://redux.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            Redux\n                        </ExternalLink>\n                    </li>\n                    <li>\n                        <ExternalLink href=\"https://styled-components.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            Styled Components\n                        </ExternalLink>\n                    </li>\n                    <li>\n                        <ExternalLink href=\"https://material-ui.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            Material UI\n                        </ExternalLink>\n                    </li>\n                    <li>\n                        <ExternalLink href=\"https://fontawesome.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            Font Awesome\n                        </ExternalLink>\n                    </li>\n                </ul>\n                <p>\n                    <b>Attribution:</b>\n                </p>\n                <p>\n                    <img src={playstationClassicIcon} height={16} width={16} alt=\"Playstation Classic icon\" /> Classic\n                    Playstation Icon is made by{\" \"}\n                    <ExternalLink\n                        href=\"https://www.flaticon.com/authors/freepik\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                    >\n                        Freepik\n                    </ExternalLink>{\" \"}\n                    from{\" \"}\n                    <ExternalLink href=\"https://www.flaticon.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        Flaticon\n                    </ExternalLink>\n                    .\n                </p>\n            </AboutContent>\n\n            <Footer />\n        </AboutContainer>\n    );\n};\n\nexport default About;\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\nimport { getInitialPrice, getPsPlusPrice, getSalePrice } from \"../../services/PlayStationGameService\";\nimport * as PlaystationApi from \"playstation-api\";\n\nconst GameDetailMediaCardContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    cursor: pointer;\n`;\n\nconst GameDetailMediaCardImage = styled.img`\n    width: 240px;\n    height: 240px;\n    align-self: center;\n    border-radius: 0.25rem;\n    transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n    box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14),\n        0px 1px 10px 0px rgba(0, 0, 0, 0.12);\n`;\n\nconst GameDetailMediaCardPrices = styled.div`\n    display: flex;\n    flex-direction: row;\n    padding: 0.5rem 0;\n    align-items: center;\n    font-size: 2rem;\n\n    @media (min-width: 600px) {\n        font-size: 1rem;\n    }\n`;\n\ninterface Props extends React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n    game: PlaystationApi.types.PlaystationResponse;\n}\n\nconst MediaCard: React.FC<Props> = (props: Props) => {\n    const redirectToPsStore = () => {\n        window.open(PlaystationApi.helpers.getStoreGameLink(props.region, props.game.id), \"_blank\");\n    };\n\n    const initialPrice = getInitialPrice(props.game);\n    const salePrice = getSalePrice(props.game);\n    const psPlusPrice = getPsPlusPrice(props.game);\n\n    const prices: JSX.Element[] = [];\n    if (initialPrice === salePrice) {\n        prices.push(\n            <div key={\"detail-price-\" + props.game.id} className=\"Game-detail-price\">\n                {salePrice}\n            </div>,\n        );\n    } else {\n        // price.push(<div className=\"Game-detail-inactive-price\">{initialPrice}</div>);\n        prices.push(\n            <div key={\"sale-price-\" + props.game.id} className=\"Game-detail-sale-price\">\n                {salePrice}\n            </div>,\n        );\n    }\n\n    if (psPlusPrice) {\n        prices.push(\n            <div key={\"ps-plus-price-\" + props.game.id} className=\"Game-detail-ps-plus-price\">\n                {psPlusPrice}\n            </div>,\n        );\n    }\n\n    return (\n        <GameDetailMediaCardContainer onClick={redirectToPsStore}>\n            <GameDetailMediaCardImage\n                loading=\"lazy\"\n                src={PlaystationApi.helpers.getPreviewImage(props.game)}\n                title={props.game.name}\n                placeholder={props.game.name}\n                width={240}\n                height={240}\n            />\n\n            <GameDetailMediaCardPrices>\n                <FontAwesomeIcon\n                    key={\"shopping-cart-\" + props.game.id}\n                    icon={faShoppingCart}\n                    size=\"1x\"\n                    style={{ marginRight: \"0.25rem\" }}\n                />\n                {prices}\n            </GameDetailMediaCardPrices>\n        </GameDetailMediaCardContainer>\n    );\n};\n\nexport default MediaCard;\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nconst Title = styled.span`\n    margin: 0;\n    letter-spacing: 0.02857em;\n    text-transform: uppercase;\n`;\n\nconst Values = styled.p`\n    margin: 0;\n    letter-spacing: 0.01071em;\n`;\n\ninterface Props extends React.HTMLProps<any> {\n    attribute: string;\n    values: string[];\n}\n\nconst AttributeCard: React.FC<Props> = (props: Props) => {\n    if (!props.attribute || !props.values || props.values.length === 0) {\n        return <></>;\n    }\n\n    return (\n        <>\n            <Title>{props.attribute}</Title>\n            <Values>\n                {props.values?.map((value: string) => {\n                    return value + \" \";\n                })}\n            </Values>\n        </>\n    );\n};\n\nexport default AttributeCard;\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport \"./index.css\";\nimport React from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\nimport { Link, RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport * as PlaystationApi from \"playstation-api\";\nimport styled from \"styled-components\";\nimport { GAME } from \"../../store/keys\";\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport MediaCard from \"./MediaCard\";\nimport AttributeCard from \"./AttributeCard\";\n\nconst GameDetailTitle = styled.h3`\n    margin: 0;\n    font-size: 3rem;\n    font-family: \"Roboto\", \"Helvetica\", \"Arial\", sans-serif;\n    font-weight: 400;\n    line-height: 1.167;\n    letter-spacing: 0;\n    cursor: pointer;\n`;\n\nconst GameDetailDescription = styled.div`\n    font-size: 0.9rem;\n`;\n\nconst SpaceElement = styled.div`\n    height: 0.5rem;\n`;\n\nconst HiddenMobile = styled.div`\n    @media screen and (max-width: 600px) {\n        display: none;\n    }\n`;\n\nconst HiddenDesktop = styled.div`\n    @media screen and (min-width: 600px) {\n        display: none;\n    }\n`;\n\ninterface Props extends RouteComponentProps<{ cusa: string }>, React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n}\n\nconst GameDetail: React.FC<Props> = (props: Props) => {\n    const cusa: string = props.match.params.cusa;\n    const url: string = props.location.state ? (props.location.state as string) : \"\";\n    const [isLoaded, setIsLoaded] = React.useState(false);\n    const [game, setGame] = React.useState<any | undefined>(undefined);\n\n    try {\n        const sessionItem = sessionStorage.getItem(GAME + cusa);\n        const item = JSON.parse(sessionItem!) as PlaystationApi.types.PlaystationResponse;\n        // TODO check session item timestamp and clear if old.\n        setIsLoaded(true);\n        setGame(item);\n    } catch (e) {\n        setIsLoaded(false);\n        setGame(undefined);\n    }\n\n    const isCorruptedData = !cusa || !url;\n\n    React.useEffect(() => {\n        if (isCorruptedData) {\n            return;\n        }\n        if (isLoaded && game) {\n            return;\n        }\n\n        fetch(url)\n            .then((response) => response.json())\n            .then((json: any) => {\n                const item = json as PlaystationApi.types.PlaystationResponse;\n                setIsLoaded(true);\n                setGame(item);\n                sessionStorage.setItem(GAME + cusa, JSON.stringify(game));\n            })\n            .catch((e) => console.error(`Cannot load game data, [${cusa}].`, e));\n    }, []);\n\n    if (isCorruptedData) {\n        return <></>;\n    }\n\n    if (!isLoaded || !game || !game.name || !game.images) {\n        return <LoadingSpinner msg={<p>Loading game information...</p>} />;\n    }\n\n    const gameLink = PlaystationApi.helpers.getStoreGameLink(props.region, game.id);\n    const platforms = new Set<string>();\n    const voices = new Set<string>();\n    const subtitles = new Set<string>();\n    for (const platform of game.playable_platform) {\n        platforms.add(platform.substring(0, platform.indexOf(\"\")).toUpperCase());\n    }\n    for (const entitlement of game.default_sku?.entitlements) {\n        entitlement.packages?.map((pkg: PlaystationApi.types.Package) => {\n            platforms.add(pkg.platformName.toUpperCase());\n        });\n        entitlement.voice_language_codes?.map((voice: string) => {\n            voices.add(voice.toUpperCase());\n        });\n        entitlement.subtitle_language_codes?.map((subtitle: string) => {\n            subtitles.add(subtitle.toUpperCase());\n        });\n    }\n\n    return (\n        <>\n            <Header />\n            <Container>\n                <nav aria-label=\"breadcrumb\">\n                    <ol className=\"breadcrumb\">\n                        <li className=\"breadcrumb-item\">\n                            <Link to=\"/\">Home</Link>\n                        </li>\n                        <li className=\"breadcrumb-item active\" aria-current=\"page\">\n                            {game.name}\n                        </li>\n                    </ol>\n                </nav>\n                <Row>\n                    <Col xs={12} sm={0} md={0} lg={0} xl={0}>\n                        <HiddenDesktop>\n                            <MediaCard region={props.region} game={game} />\n                        </HiddenDesktop>\n                    </Col>\n\n                    <Col xs={12} sm={9} md={9} lg={9} xl={9}>\n                        <GameDetailTitle\n                            onClick={() => {\n                                window.open(gameLink, \"_blank\");\n                            }}\n                        >\n                            {game.name}\n                            {game.content_rating?.url ? (\n                                <img\n                                    src={game.content_rating?.url}\n                                    loading=\"eager\"\n                                    alt=\"rating\"\n                                    height=\"45px\"\n                                    width=\"45px\"\n                                />\n                            ) : (\n                                <></>\n                            )}\n                        </GameDetailTitle>\n\n                        <GameDetailDescription dangerouslySetInnerHTML={{ __html: game.long_desc }} />\n                    </Col>\n\n                    <Col xs={0} sm={3} md={3} lg={3} xl={3}>\n                        <HiddenMobile>\n                            <MediaCard region={props.region} game={game} />\n                            <SpaceElement />\n                            <AttributeCard attribute=\"Platforms\" values={[...platforms.keys()]} />\n                            <SpaceElement />\n                            <AttributeCard attribute=\"Audio\" values={[...voices.keys()]} />\n                            <SpaceElement />\n                            <AttributeCard attribute=\"Subtitles\" values={[...subtitles.keys()]} />\n                        </HiddenMobile>\n                    </Col>\n                </Row>\n            </Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) => ({ region: state.region.current });\n\nexport default withRouter(connect(mapStateToProps)(GameDetail));\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport * as PlaystationApi from \"playstation-api\";\n\nexport interface Props extends RouteComponentProps, React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n    game: PlaystationItemPreview;\n}\n\nconst GamePreview: React.FC<Props> = (props: Props) => {\n    const handleGameClick = (game: PlaystationItemPreview) => {\n        props.history.push({ pathname: \"/game/\" + game.id, state: game.url });\n    };\n\n    const redirectToPsStore = (event: any) => {\n        event.preventDefault();\n        window.open(PlaystationApi.helpers.getStoreGameLink(props.region, props.game.id), \"_blank\");\n    };\n\n    let price = (\n        <div onClick={redirectToPsStore}>\n            <small>{props.game.initial_price}</small>\n        </div>\n    );\n    if (props.game.sale_discount) {\n        price = (\n            <div onClick={redirectToPsStore}>\n                <small className=\"price-sale\"> {props.game.sale_discount}% </small>{\" \"}\n                <s>\n                    <small>{props.game.initial_price}</small>\n                </s>{\" \"}\n                <small>{props.game.sale_price}</small>\n            </div>\n        );\n    }\n\n    const imageLink = PlaystationApi.queries.getGameImageLink(props.region, props.game.id, 256, 256); // props.game.image;\n\n    return (\n        <Card className=\"preview-card\">\n            <Card.Img\n                variant=\"top\"\n                className=\"btn p-0\"\n                src={imageLink}\n                loading=\"lazy\"\n                alt={props.game.name}\n                title={props.game.name}\n                placeholder={props.game.name}\n                onClick={() => handleGameClick(props.game)}\n            />\n            <Card.Body className=\"p-2 btn\" onClick={() => handleGameClick(props.game)}>\n                <Card.Title className=\"m-0 text-left\">\n                    <small>{props.game.name}</small>\n                </Card.Title>\n            </Card.Body>\n            <Card.Footer className=\"text-left p-2\">{price}</Card.Footer>\n        </Card>\n    );\n};\n\nexport default withRouter(GamePreview);\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport styled from \"styled-components\";\nimport * as PlaystationApi from \"playstation-api\";\nimport GamePreview from \"./GamePreview\";\n\nconst StoreGrid = styled.div`\n    display: grid;\n    grid-template-columns: repeat(auto-fit, var(--img-preview-side-small));\n    grid-auto-rows: auto;\n    gap: 1rem;\n    justify-content: center;\n\n    @media screen and (min-width: 600px) {\n        grid-template-columns: repeat(auto-fit, var(--img-preview-side));\n        grid-auto-rows: auto;\n        gap: 0.5rem;\n    }\n`;\n\ninterface Props {\n    region: PlaystationApi.types.PlaystationRegion;\n    games: PreviewGamesMapItem[];\n    hasMoreItems: Function;\n    loadNextPage: Function;\n}\n\nconst PreviewsGrid: React.FC<Props> = (props: Props) => {\n    const loadNextPage = (nextPage: number) => {\n        props.loadNextPage(nextPage);\n    };\n\n    const items = props.games.slice().map((item) => {\n        return <GamePreview key={\"game-preview-\" + item.key} region={props.region} game={item.game} />;\n    });\n\n    const threshold = window.screen.height;\n\n    return (\n        <Container fluid>\n            <InfiniteScroll\n                key={\"infinite-scroll\"}\n                hasMore={props.hasMoreItems()}\n                initialLoad={true}\n                isReverse={false}\n                loadMore={loadNextPage}\n                pageStart={0}\n                threshold={threshold}\n                useCapture={false}\n                useWindow={true}\n            >\n                <StoreGrid>{items}</StoreGrid>\n            </InfiniteScroll>\n        </Container>\n    );\n};\n\nexport default PreviewsGrid;\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ChangeEvent } from \"react\";\nimport { Col, Container, Form, FormControl } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport * as PlaystationApi from \"playstation-api\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport PreviewsGrid from \"../../components/PreviewsGrid\";\nimport { searchGames } from \"../../actions/gameActions\";\n\ninterface Props extends RouteComponentProps, React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n    store: PlaystationStore;\n    searchGames: Function;\n}\n\nconst Search: React.FC<Props> = (props: Props) => {\n    React.useEffect(() => {\n        if (!props.store) {\n            props.history.push(\"/\");\n        }\n    }, []);\n\n    const hasMoreItems = () => {\n        return false;\n    };\n\n    const loadNextPage = (nextPage: number) => {};\n\n    const handleInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n        if (!e.target || !props.region) return;\n        const query = e.target.value;\n        if (!query || query.length <= 3 || query[query.length - 1] === \" \") return;\n\n        props.searchGames(props.region, query);\n    };\n\n    if (!props.store || !props.store.search) {\n        return <></>;\n    }\n\n    return (\n        <>\n            <Header isLanguageEnabled={true} />\n            <Container fluid>\n                <Form>\n                    <Col xs={4} className=\"mx-auto pt-2 pb-2\">\n                        <FormControl\n                            key=\"search-input\"\n                            type=\"text\"\n                            placeholder=\"Start typing...\"\n                            onChange={(e: ChangeEvent<HTMLInputElement>) => handleInputChange(e)}\n                        />\n                    </Col>\n                </Form>\n\n                <PreviewsGrid\n                    region={props.region}\n                    games={props.store.search}\n                    hasMoreItems={hasMoreItems}\n                    loadNextPage={loadNextPage}\n                />\n            </Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) => ({\n    region: state.region.current,\n    store: state.store,\n});\nconst mapDispatchToProps = { searchGames: searchGames };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { Container } from \"react-bootstrap\";\nimport * as PlaystationApi from \"playstation-api\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport PreviewsGrid from \"../../components/PreviewsGrid\";\nimport { fetchGamePreviewsList } from \"../../actions/gameActions\";\n\ninterface Props extends RouteComponentProps, React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n    store: PlaystationStore;\n    fetchGames: Function;\n}\n\nconst Discounts: React.FC<Props> = (props: Props) => {\n    React.useEffect(() => {\n        if (!props.region || !props.store || !props.store.info || !props.store.info.total_results) {\n            props.history.push(\"/\");\n        }\n    }, []);\n\n    const hasMoreItems = () => {\n        return !(\n            !props.store.info ||\n            !props.store.previews ||\n            props.store.previews.length >= props.store.info.total_results\n        );\n    };\n\n    const loadNextPage = (nextPage: number) => {\n        if (!props.store.info || !props.store.previews) {\n            return;\n        }\n        props.fetchGames(props.region, props.store.info.total_results, props.store.previews.length);\n    };\n\n    if (!props.store || !props.store.previews) {\n        return <></>;\n    }\n\n    const list = props.store.previews.slice().filter((item) => {\n        return item.game.sale_discount !== undefined;\n    });\n\n    return (\n        <>\n            <Header isLanguageEnabled={true} />\n            <Container fluid>\n                <PreviewsGrid\n                    region={props.region}\n                    games={list}\n                    hasMoreItems={hasMoreItems}\n                    loadNextPage={loadNextPage}\n                />\n            </Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) =>\n    ({\n        region: state.region.current,\n        store: state.store,\n    } as Props);\nconst mapDispatchToProps = { fetchGames: fetchGamePreviewsList };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Discounts));\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport * as PlaystationApi from \"playstation-api\";\nimport { Container } from \"react-bootstrap\";\nimport { fetchGamePreviewsList } from \"../../actions/gameActions\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport PreviewsGrid from \"../../components/PreviewsGrid\";\n\ninterface Props extends RouteComponentProps, React.HTMLProps<any> {\n    region: PlaystationApi.types.PlaystationRegion;\n    store: PlaystationStore;\n    fetchGames: Function;\n}\n\nconst AllGames: React.FC<Props> = (props: Props) => {\n    React.useEffect(() => {\n        if (!props.region || !props.store || !props.store.info || !props.store.info.total_results) {\n            props.history.push(\"/\");\n        }\n    }, []);\n\n    const hasMoreItems = () => {\n        return !(\n            !props.store.info ||\n            !props.store.previews ||\n            props.store.previews.length >= props.store.info.total_results\n        );\n    };\n\n    const loadNextPage = (nextPage: number) => {\n        if (!props.store.info || !props.store.previews) {\n            return;\n        }\n        props.fetchGames(props.region, props.store.info.total_results, props.store.previews.length);\n    };\n\n    if (!props.store || !props.store.previews) {\n        return <></>;\n    }\n\n    return (\n        <>\n            <Header isLanguageEnabled={true} />\n            <Container fluid>\n                <PreviewsGrid\n                    region={props.region}\n                    games={props.store.previews}\n                    hasMoreItems={hasMoreItems}\n                    loadNextPage={loadNextPage}\n                />\n            </Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) => ({\n    region: state.region.current,\n    store: state.store,\n});\nconst mapDispatchToProps = { fetchGames: fetchGamePreviewsList };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(AllGames));\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Container } from \"react-bootstrap\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport { withRouter } from \"react-router-dom\";\n\nconst WishList: React.FC<any> = (props: any) => {\n    return (\n        <>\n            <Header isLanguageEnabled={true} />\n            <Container fluid></Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = null;\nconst mapDispatchToProps = null;\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(WishList));\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\ninterface CountryCodeCallBack {\n    (country_code: string): void;\n}\n\nexport const getAddress = async (pos: Position): Promise<string> => {\n    const resp = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`,\n    );\n    const json = await resp.json();\n    if (!json.address || !json.address.country_code) return \"\";\n\n    return json.address.country_code;\n};\n\nexport const getCountryCode = (callback: CountryCodeCallBack) => {\n    if (!navigator || !navigator.geolocation) return;\n    navigator.geolocation.getCurrentPosition((pos) => {\n        getAddress(pos)\n            .then((country_code) => callback(country_code))\n            .catch((e) => console.error(e));\n    });\n};\n","/*\n * Copyright (c) 2020. Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { selectRegion } from \"../../actions/regionActions\";\nimport { clearGamesStore } from \"../../actions/gameActions\";\nimport { getCountryCode } from \"../../services/GeoLocation\";\nimport * as PlaystationApi from \"playstation-api\";\nimport { Container } from \"react-bootstrap\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\n\nconst SelectRegionGrid = styled.div`\n    min-height: 0;\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(16.875rem, 0.45fr));\n    grid-auto-rows: minmax(0px, 70px);\n    gap: 0.5rem;\n    justify-content: center;\n\n    @media screen and (min-width: 600px) {\n        grid-template-columns: repeat(auto-fit, 16.875rem);\n        gap: 0.75rem;\n    }\n`;\n\nconst SelectRegionCard = styled.div`\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    justify-content: center;\n    border-radius: 0.25rem;\n    background-color: var(--br-card);\n    border: 0;\n    cursor: pointer;\n    margin: 0;\n    box-shadow: var(--box-shadow-card);\n    overflow: hidden;\n`;\n\nconst SelectRegionHeader = styled.h1`\n    text-align: center;\n`;\n\nconst SelectRegionName = styled.p`\n    text-align: center;\n`;\n\ninterface Props extends RegionState, RouteComponentProps, React.HTMLProps<any> {\n    selectRegion: Function;\n    clearGamesStore: Function;\n}\n\nconst SelectRegion: React.FC<Props> = (props: Props) => {\n    React.useEffect(() => {\n        getCountryCode((country_code: string) => {\n            for (const region of props.regions) {\n                if (region.country.toLowerCase() !== country_code.toLowerCase()) continue;\n                props.selectRegion(region);\n            }\n        });\n    }, []);\n\n    React.useEffect(() => {\n        if (props.current) {\n            props.history.push(\"/\");\n        }\n    }, [props.current]);\n\n    const renderRegion = (region: PlaystationApi.types.PlaystationRegion) => {\n        return (\n            <SelectRegionCard\n                key={\"region-\" + region.name}\n                className=\"SelectRegion-card\"\n                onClick={() => {\n                    props.clearGamesStore();\n                    props.selectRegion(region);\n                }}\n            >\n                <SelectRegionName>{region.name}</SelectRegionName>\n            </SelectRegionCard>\n        );\n    };\n\n    const regions = props.regions.map((region) => renderRegion(region));\n    return (\n        <>\n            <Header />\n            <Container fluid>\n                <SelectRegionHeader>Please select your country / region</SelectRegionHeader>\n                <SelectRegionGrid>{regions}</SelectRegionGrid>\n            </Container>\n            <Footer />\n        </>\n    );\n};\n\nconst mapStateToProps = (state: ReduxStoreState) =>\n    ({ regions: state.region.regions, current: state.region.current } as RegionState);\nconst mapDispatchToProps = {\n    selectRegion: selectRegion,\n    clearGamesStore: clearGamesStore,\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SelectRegion));\n","/*\n * Copyright 2020 Oleg Shulyakov\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { persistor, store } from \"./store/configureStore\";\nimport { APP_VERSION } from \"./store/keys\";\nimport About from \"./pages/About\";\nimport GameDetail from \"./pages/GameDetail\";\nimport Search from \"./pages/Search\";\nimport Discounts from \"./pages/Discounts\";\nimport AllGames from \"./pages/AllGames\";\nimport WishList from \"./pages/Wishlist\";\nimport SelectRegion from \"./pages/SelectRegion\";\n\nconst previousAppVersion = localStorage.getItem(APP_VERSION);\nconst appVersion = `${process.env.REACT_APP_VERSION}`;\nif (previousAppVersion && previousAppVersion !== appVersion) {\n    localStorage.clear();\n}\nlocalStorage.setItem(APP_VERSION, appVersion);\n\nReactDOM.render(\n    <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/\" exact component={() => <App />} />\n                    <Route path=\"/selectregion\" exact component={() => <SelectRegion />} />\n                    <Route path=\"/search\" exact component={() => <Search />} />\n                    <Route path=\"/discounts\" exact component={() => <Discounts />} />\n                    <Route path=\"/allgames\" exact component={() => <AllGames />} />\n                    <Route path=\"/wishlist\" exact component={() => <WishList />} />\n                    <Route path=\"/about\" exact component={() => <About />} />\n                    <Route path=\"/game/:cusa\" component={() => <GameDetail />} />\n                </Switch>\n            </BrowserRouter>\n        </PersistGate>\n    </Provider>,\n    document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/playstation-classic.402fbb90.svg\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.REGIONS = exports.DEFAULT_SEARCH_SIZE = exports.DEFAULT_FETCH_SIZE = exports.SORT_DIRECTIONS = exports.SORT_FIELDS = void 0;\nexports.SORT_FIELDS = Object.freeze({ RELEASE_DATE: \"release_date\", TIMESTAMP: \"timestamp\" });\nexports.SORT_DIRECTIONS = Object.freeze({ ASC: \"asc\", DESC: \"desc\" });\nexports.DEFAULT_FETCH_SIZE = 25;\nexports.DEFAULT_SEARCH_SIZE = 5;\nexports.REGIONS = [\n    { name: \"Argentina\", language: \"es\", country: \"ar\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Australia\", language: \"en\", country: \"au\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Austria (sterreich)\", language: \"de\", country: \"at\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Belgium (Franais)\", language: \"fr\", country: \"be\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Belgium (Nederlands)\", language: \"nl\", country: \"be\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Brasil\", language: \"pt\", country: \"br\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Bulgaria ()\", language: \"bg\", country: \"bg\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Canada\", language: \"en\", country: \"ca\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Canada (French)\", language: \"fr\", country: \"ca\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Chile\", language: \"es\", country: \"cl\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Colombia\", language: \"es\", country: \"co\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Costa Rica\", language: \"es\", country: \"cr\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Croatia (Hrvatska)\", language: \"hr\", country: \"hr\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Cyprus\", language: \"en\", country: \"cy\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Czech Republic (Cesk Republika)\", language: \"cs\", country: \"cz\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Denmark (Danmark)\", language: \"da\", country: \"dk\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Ecuador\", language: \"es\", country: \"ec\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"El Salvador\", language: \"es\", country: \"sv\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Finland (Suomi)\", language: \"fi\", country: \"fi\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"France\", language: \"fr\", country: \"fr\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Germany (Deutschland)\", language: \"de\", country: \"de\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Greece ()\", language: \"el\", country: \"gr\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Guatemala\", language: \"es\", country: \"gt\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Honduras\", language: \"es\", country: \"hn\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Hungary (Magyarorszg)\", language: \"hu\", country: \"hu\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Iceland (sland)\", language: \"is\", country: \"is\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"India\", language: \"en\", country: \"in\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Ireland\", language: \"en\", country: \"ie\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Italy\", language: \"it\", country: \"it\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Luxembourg (Deutsch)\", language: \"de\", country: \"lu\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Luxembourg (Franais)\", language: \"fr\", country: \"lu\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Malta\", language: \"en\", country: \"mt\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Mexico (Mxico)\", language: \"es\", country: \"mx\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Nederland\", language: \"nl\", country: \"nl\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"New Zealand\", language: \"en\", country: \"nz\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Nicaragua\", language: \"es\", country: \"ni\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Norway (Norge)\", language: \"no\", country: \"no\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Panama (Panam)\", language: \"es\", country: \"pa\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Paraguay\", language: \"es\", country: \"py\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Peru (Per)\", language: \"es\", country: \"pe\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"Poland (Polska)\", language: \"pl\", country: \"pl\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Portugal\", language: \"pt\", country: \"pt\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Romania (Romnia)\", language: \"ro\", country: \"ro\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Russia ()\", language: \"ru\", country: \"ru\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Saudi Arabia (Arabic)\", language: \"ar\", country: \"sa\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Slovenia (Slovenija)\", language: \"sl\", country: \"si\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Slovakia (Slovensk Republika)\", language: \"sk\", country: \"sk\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"South Africa\", language: \"en\", country: \"za\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Spain (Espaa)\", language: \"es\", country: \"es\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Sweden (Sverige)\", language: \"sv\", country: \"se\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Switzerland (Deutsch)\", language: \"de\", country: \"ch\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Switzerland (Franais)\", language: \"fr\", country: \"ch\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Switzerland (Italiano)\", language: \"it\", country: \"ch\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Turkey (Trkiye)\", language: \"tr\", country: \"tr\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Ukraine ()\", language: \"uk\", country: \"ua\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"United Arab Emirates / Middle East\", language: \"en\", country: \"ae\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"United States\", language: \"en\", country: \"us\", root: \"STORE-MSF77008-ALLGAMES\" },\n    { name: \"United Kingdom\", language: \"en\", country: \"gb\", root: \"STORE-MSF75508-FULLGAMES\" },\n    { name: \"Uruguay\", language: \"es\", country: \"uy\", root: \"STORE-MSF77008-ALLGAMES\" },\n];\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.helpers = exports.queries = exports.constants = exports.types = void 0;\nconst types = __importStar(require(\"./types\"));\nexports.types = types;\nconst constants = __importStar(require(\"./constants\"));\nexports.constants = constants;\nconst queries = __importStar(require(\"./queries\"));\nexports.queries = queries;\nconst helpers = __importStar(require(\"./helpers\"));\nexports.helpers = helpers;\nconst playStationApi = Object.assign(Object.assign(Object.assign(Object.assign({}, constants), helpers), queries), types);\nexports.default = playStationApi;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findView = exports.search = exports.getGameImageLink = exports.getGamesList = exports.getStoreInfo = exports.getGameInfo = exports.query = exports.getGeoInfo = exports.isQueryFailed = void 0;\nconst constants_1 = require(\"./constants\");\nconst baseUrl = \"https://store.playstation.com/store/api/chihiro/00_09_000\";\nfunction isQueryFailed(storeInfo) {\n    return storeInfo.cause || (storeInfo.codeName && storeInfo.codeName === \"DataNotFound\");\n}\nexports.isQueryFailed = isQueryFailed;\nasync function getGeoInfo() {\n    return await fetch(`${baseUrl}/geo`);\n}\nexports.getGeoInfo = getGeoInfo;\nasync function query(region, cusa, size = 1, start) {\n    let url = `${baseUrl}/container/${region.country}/${region.language}/999/${cusa}?&sort=${constants_1.SORT_FIELDS.TIMESTAMP}&direction=${constants_1.SORT_DIRECTIONS.DESC}`;\n    if (size !== undefined) {\n        url += `&size=${size}`;\n    }\n    if (start !== undefined) {\n        url += `&start=${start}`;\n    }\n    const response = await fetch(url);\n    const json = await response.json();\n    if (isQueryFailed(json)) {\n        throw Error(`Cannot execute query. ${json.cause}`);\n    }\n    return json;\n}\nexports.query = query;\nasync function getGameInfo(region, cusa) {\n    return (await query(region, cusa, 0));\n}\nexports.getGameInfo = getGameInfo;\nasync function getStoreInfo(region) {\n    return (await query(region, region.root, 0));\n}\nexports.getStoreInfo = getStoreInfo;\nasync function getGamesList(region, size = constants_1.DEFAULT_FETCH_SIZE, start = 0) {\n    const json = (await query(region, region.root, size, start));\n    return json.links;\n}\nexports.getGamesList = getGamesList;\nfunction getGameImageLink(region, cusa, width = 240, height = 240) {\n    return `${baseUrl}/container/${region.country}/${region.language}/999/${cusa}/image?w=${width}&h=${height}`;\n}\nexports.getGameImageLink = getGameImageLink;\nasync function search(region, searchString, size = constants_1.DEFAULT_SEARCH_SIZE) {\n    const url = `https://store.playstation.com/store/api/chihiro/00_09_000/tumbler/${region.country}/${region.language}/999/${escape(searchString)}?size=${size}`;\n    const response = await fetch(url);\n    const json = await response.json();\n    if (isQueryFailed(json)) {\n        throw Error(`Cannot execute query. ${json.cause}`);\n    }\n    return json;\n}\nexports.search = search;\nasync function findView(region, cusa) {\n    const url = `https://store.playstation.com/chihiro-api/viewfinder/${region.country}/${region.language}/999/${cusa}?gkb=1`;\n    const response = await fetch(url);\n    const json = await response.json();\n    if (isQueryFailed(json)) {\n        throw Error(`Cannot execute query. ${json.cause}`);\n    }\n    return json;\n}\nexports.findView = findView;\n//# sourceMappingURL=queries.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSaleDetails = exports.isSale = exports.getPreviewImage = exports.getStoreGameLink = void 0;\nfunction getStoreGameLink(region, cusa) {\n    return `https://store.playstation.com/${region.language}-${region.country}/product/${cusa}`;\n}\nexports.getStoreGameLink = getStoreGameLink;\nfunction getPreviewImage(game) {\n    return game.images[0].url;\n}\nexports.getPreviewImage = getPreviewImage;\nfunction isSale(game) {\n    var _a, _b;\n    return ((_a = game.default_sku) === null || _a === void 0 ? void 0 : _a.rewards) && ((_b = game.default_sku) === null || _b === void 0 ? void 0 : _b.rewards.length) > 0;\n}\nexports.isSale = isSale;\nfunction getSaleDetails(game) {\n    var _a, _b, _c;\n    if (((_a = game.default_sku) === null || _a === void 0 ? void 0 : _a.rewards) && ((_b = game.default_sku) === null || _b === void 0 ? void 0 : _b.rewards.length) > 0) {\n        return (_c = game.default_sku) === null || _c === void 0 ? void 0 : _c.rewards[0];\n    }\n    return undefined;\n}\nexports.getSaleDetails = getSaleDetails;\n//# sourceMappingURL=helpers.js.map"],"sourceRoot":""}